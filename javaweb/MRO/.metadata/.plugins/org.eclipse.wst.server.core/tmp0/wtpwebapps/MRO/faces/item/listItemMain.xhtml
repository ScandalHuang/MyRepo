
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui" xmlns:i18n="http://innolux.com/i18n"
	template="/faces/template/template.xhtml">
	<ui:define name="page-content">
		<ui:include src="../CommonView/fileUpload.xhtml" />
		<!-- Panel-TabView-Dynamic Content(Change Listener) -->
		<h:form id="form" prependId="false">

			<!-- <p:growl id="growl" showDetail="true" /> -->


			<p:tabView id="tabView" cache="true" dynamic="true" 
				activeIndex="#{ListItemBean.listItemForm.activeIndex}">

			<p:ajax event="tabChange" listener="#{ListItemBean.onTabChange}" />

				<p:tab id="tab1" title="清單">
					<!-- h:panelGrid columns="1" cellpadding="10">
						<h:outputText value="說明: " />
						<h:outputText
							value="顯示/輸入查詢條件(AND):
									a. 料號  (free key-In/ 模糊收尋)
									b. 品名敘述  (free key-In/ 模糊收尋)
									c. 主分類  (清單選項: 92/93/94)
									d. 次分類  (清單選項: 92-01,…)" />
						<h:outputText
							value="click Enter後，於[頁籤:料號清單] 輸出清單結果: 
									料號/ 品茗敘述/ 主分類/ 次分類/ 狀態/ 更新日期" />
						<h:outputText
							value="點選一項料號後，於[頁籤:料號明細] 輸出該筆料號明細資料； 
									並於[頁籤:可替代備料]、[頁籤:各廠庫存]、[頁籤:供應商]、[頁籤:控管異動歷史與採購現況] (可以多筆)；
									而於[頁籤:規格] (僅可乙筆)" />
					</h:panelGrid-->

					<p:panel id="panelSearch" header="Search Items" toggleable="true"
						toggleSpeed="500" widgetVar="panelSearch">
						<div align="center">
							<p:panelGrid columns="5">

								<i18n:outputText value="ItemCategory" />
								<i18n:outputText value="itemnum" />
								<i18n:outputText value="description" />
								<i18n:outputText value="class_structure_id" />
								<i18n:outputText value="" />

								<p:selectOneMenu value="#{ListItemBean.listItemForm.selectItemCategory}"
									style="width:100px">
									<f:selectItems value="#{ListItemBean.itemForm.itemCategoryOption}" />
								</p:selectOneMenu>
								<p:inputText value="#{ListItemBean.listItemForm.itemnum}" />
								<p:inputText value="#{ListItemBean.listItemForm.description}" />
								<p:inputText value="#{ListItemBean.listItemForm.classstructureid}" />

								<p:commandButton icon="ui-icon-search" value="Search"
									 
									actionListener="#{ListItemBean.onSearch}" update=":form" />
							</p:panelGrid>
						</div>
					</p:panel>
					
					<p:dataTable var="listItemBeanItemVO"
						value="#{ListItemBean.listItemForm.listItemBeanItemVO}"
						rowKey="#{listItemBeanItemVO.itemid}" paginator="true" rows="10"
						paginatorPosition="bottom"
						selectionMode="single" id="listItemBeanItemVO">

						<p:ajax event="rowSelect" listener="#{ListItemBean.onRowSelect}"
							update=":form" 
							 />
 
						<p:column sortBy="#{listItemBeanItemVO.itemnum}">
							<f:facet name="header">
								料號
							</f:facet>
							<h:outputText value="#{listItemBeanItemVO.itemnum}" />

						</p:column>

						<p:column sortBy="#{listItemBeanItemVO.description}">
							<f:facet name="header">
								敘述

							</f:facet>
							<h:outputText value="#{listItemBeanItemVO.description}" />

						</p:column>

						<p:column sortBy="#{listItemBeanItemVO.classstructureid}">
							<f:facet name="header">
								類別結構

							</f:facet>
							<h:outputText value="#{listItemBeanItemVO.classstructureid}" />

						</p:column>

						<p:column sortBy="#{listItemBeanItemVO.classstructureDescription}">
							<f:facet name="header">
								類別說明

							</f:facet>
							<h:outputText
								value="#{listItemBeanItemVO.classstructureDescription}" />

						</p:column>

						<p:column
							sortBy="#{SystemConfigBean.parameterMap[listItemBeanItemVO.status]}">
							<f:facet name="header">
								狀態

							</f:facet>
							<h:outputText
								value="#{SystemConfigBean.parameterMap[listItemBeanItemVO.status]}" />

						</p:column>
						<p:column sortBy="#{listItemBeanItemVO.changeLastUpdate}">
							<f:facet name="header">
								更新日期

							</f:facet>
							<h:outputText value="#{listItemBeanItemVO.changeLastUpdate}">
								<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss"
									timeZone="GMT+8" />
							</h:outputText>

						</p:column>
					</p:dataTable>
					<p:panelGrid columns="2">
						<p:panel header="Export All Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="listItemBeanItemVO"
									fileName="listItem" />
							</h:commandLink>
						</p:panel>

						<p:panel header="Export Page Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="listItemBeanItemVO"
									fileName="listItem" pageOnly="true" />
							</h:commandLink>
						</p:panel>
					</p:panelGrid>
				</p:tab>

				<p:tab id="tab2" title="料號明細">
					<ui:include src="itemDetail.xhtml" />
				</p:tab>
				<p:tab id="tab3" title="規格">

					<h:panelGrid columns="2" cellpadding="4">
						<i18n:outputText var="i18n" value="itemnum">
							<h:outputText value="#{i18n}" /> :
								</i18n:outputText>
						<h:outputText value="#{ListItemBean.listItemForm.listItemBeanItem.itemnum}" />
						<i18n:outputText var="i18n" value="description">
							<h:outputText value="#{i18n}" /> :
								</i18n:outputText>
						<h:outputText value="#{ListItemBean.listItemForm.listItemBeanItem.description}" />
					</h:panelGrid>


					<p:dataTable var="itemspec"
						value="#{ListItemBean.listItemForm.listItemBeanItemspecVO}" paginator="true"
						paginatorPosition="bottom" rows="10" id="itemspec">

						<f:facet name="header">
							<i18n:outputText var="i18n" value="itemspec">
								<h:outputText value="#{i18n}" />
							</i18n:outputText>
						</f:facet>


						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="itemrequirevalue">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{itemspec.itemrequirevalue==1 ? 'Y':'N'}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="assetattrid">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{itemspec.assetattrid}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="description">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{itemspec.assetattributeDescription}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="datatype">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{itemspec.datatype}" />
						</p:column>
						<p:column>
							<h:outputText value="#{itemspec.numvalue}"
								rendered="#{itemspec.datatype==SystemConfigBean.numeric}" />
							<h:outputText value="#{itemspec.alnvalue}"
								rendered="#{itemspec.datatype==SystemConfigBean.aln}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="measureunitid">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{itemspec.measureunitid}" />
						</p:column>
					</p:dataTable>
					<br></br>
					<p:dataTable var="aitemspec"
						value="#{ListItemBean.listItemForm.listItemBeanAItemspecVO}" paginator="true"
						paginatorPosition="bottom" rows="10" id="aitemspec">

						<f:facet name="header">
							<i18n:outputText var="i18n" value="a_itemspec">
								<h:outputText value="#{i18n}" />
							</i18n:outputText>
						</f:facet>

						<p:column>
							<f:facet name="header">
								<i18n:outputText value="eaudittimestamp" />
							</f:facet>
							<h:outputText value="#{aitemspec.eaudittimestamp}">
								<f:convertDateTime pattern="yyyy/MM/dd HH:mm:ss"
									timeZone="GMT+8" />
							</h:outputText>
						</p:column>
						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="eauditusername">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{aitemspec.eauditusername}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="name">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{aitemspec.displayName}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="assetattrid">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{aitemspec.assetattrid}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="description">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{aitemspec.description}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="datatype">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{aitemspec.datatype}" />
						</p:column>
						<p:column>
							<f:facet name="header">
							</f:facet>
							<h:outputText value="#{aitemspec.numvalue}"
								rendered="#{aitemspec.datatype==SystemConfigBean.numeric}" />
							<h:outputText value="#{aitemspec.alnvalue}"
								rendered="#{aitemspec.datatype==SystemConfigBean.aln}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="measureunitid">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{aitemspec.measureunitid}" />
						</p:column>
					</p:dataTable>
				</p:tab>
				<p:tab id="tab4" title="各廠庫存">
					<h:panelGrid columns="2" cellpadding="4">
						<i18n:outputText var="i18n" value="itemnum">
							<h:outputText value="#{i18n}" /> :
								</i18n:outputText>
						<h:outputText value="#{ListItemBean.listItemForm.listItemBeanItem.itemnum}" />
						<i18n:outputText var="i18n" value="description">
							<h:outputText value="#{i18n}" /> :
								</i18n:outputText>
						<h:outputText value="#{ListItemBean.listItemForm.listItemBeanItem.description}" />
					</h:panelGrid>

					<p:dataTable var="listItemBeanInventoryVO" widgetVar="listItemBeanInventoryVO"
						filteredValue="#{ListItemBean.listItemForm.filterListItemBeanInventoryVO}"
						filterDelay="#{SystemConfigBean.filetDelay}"
						value="#{ListItemBean.listItemForm.listItemBeanInventoryVO}" paginator="true"
						paginatorPosition="bottom" rows="20" id="listItemBeanInventoryVO">

						<f:facet name="header">
							<i18n:outputText var="i18n" value="stock_info">
								<h:outputText value="#{i18n}" />
							</i18n:outputText>
						</f:facet>
						<c:set var="locationSite" value="#{listItemBeanInventoryVO['LOCATION_SITE']}" />
						<p:column filterBy="#{locationSite!=null?locationSite:'失效區域'}" filterMatchMode="contains">
							 <f:facet name="filter">
				                <p:selectOneMenu onchange="PF('listItemBeanInventoryVO').filter()" >
				                    <f:selectItem itemLabel="Select One" itemValue="#{null}" noSelectionOption="true" />
				                    <f:selectItem itemLabel="失效區域" itemValue="失效區域" />
				                    <f:selectItems value="#{SystemConfigBean.lSiteOption}" />
				                </p:selectOneMenu>
				            </f:facet>
							<f:facet name="header">
										區域
							</f:facet>
							<h:outputText value="#{locationSite}" />
						</p:column>
						<p:column filterBy="#{SystemConfigBean.locationMapALL[listItemBeanInventoryVO['SITEID']]}"
							filterMatchMode="contains">
							<f:facet name="header">
										廠別
							</f:facet>
							<h:outputText value="#{SystemConfigBean.locationMapALL[listItemBeanInventoryVO['SITEID']]}" />
						</p:column>
						<p:column filterBy="#{listItemBeanInventoryVO['LOCATION']}"
							filterMatchMode="contains">
							<f:facet name="header">
										倉別
									</f:facet>
							<h:outputText value="#{listItemBeanInventoryVO['LOCATION']}" />
						</p:column>
						<p:column
							rendered="#{ListItemBean.listItemForm.listItemBeanItem.commoditygroup!=SystemConfigBean.materialR94 
										and ListItemBean.listItemForm.listItemBeanItem.commoditygroup!=SystemConfigBean.materialR2}">
							<f:facet name="header">
										總月用量
									</f:facet>
							<h:outputText value="#{listItemBeanInventoryVO['CMOMINLEVEL']}" />
						</p:column>
						<p:column
							rendered="#{ListItemBean.listItemForm.listItemBeanItem.commoditygroup==SystemConfigBean.materialR94 
							or ListItemBean.listItemForm.listItemBeanItem.commoditygroup==SystemConfigBean.materialR2}">
							<f:facet name="header">
										總月平均耗用量
									</f:facet>
							<h:outputText value="#{listItemBeanInventoryVO['ORIAVGUSEQTY']}" />
						</p:column>
						<p:column
							rendered="#{ListItemBean.listItemForm.listItemBeanItem.commoditygroup==SystemConfigBean.materialR94 
							or ListItemBean.listItemForm.listItemBeanItem.commoditygroup==SystemConfigBean.materialR2}">
							<f:facet name="header">
										總最低安全存量
									</f:facet>
							<h:outputText value="#{listItemBeanInventoryVO['SSTOCK']}" />
						</p:column>
						<p:column
							rendered="#{ListItemBean.listItemForm.listItemBeanItem.commoditygroup==SystemConfigBean.materialR94 
							or ListItemBean.listItemForm.listItemBeanItem.commoditygroup==SystemConfigBean.materialR2}">
							<f:facet name="header">
										總重訂購量
									</f:facet>
							<h:outputText value="#{listItemBeanInventoryVO['CMOMINLEVEL']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										PR總數
									</f:facet>
							<h:outputText value="#{listItemBeanInventoryVO['PRQTY']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										PO總數
									</f:facet>
							<h:outputText value="#{listItemBeanInventoryVO['POQTY']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										待驗區
									</f:facet>
							<h:outputText value="#{listItemBeanInventoryVO['IQC']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										ERP目前存量
									</f:facet>
							<h:outputText value="#{listItemBeanInventoryVO['STOCK']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										交貨前置期(天)
									</f:facet>
							<h:outputText value="#{listItemBeanInventoryVO['DELIVERYTIME']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										呆滯天數	
									</f:facet>
							<h:outputText value="#{listItemBeanInventoryVO['IDLEDAYS']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										標準成本
									</f:facet>
							<h:outputText value="#{listItemBeanInventoryVO['STDCOST']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										庫存分類變更說明
									</f:facet>
							<h:outputText value="#{listItemBeanInventoryVO['MCCOMMAND']}" />
						</p:column>
					</p:dataTable>
					<p:panelGrid columns="2">
						<p:panel header="Export All Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="listItemBeanInventoryVO"
									fileName="StorInfo" />
							</h:commandLink>
						</p:panel>

						<p:panel header="Export Page Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="listItemBeanInventoryVO"
									fileName="StorInfo" pageOnly="true" />
							</h:commandLink>
						</p:panel>
					</p:panelGrid>
					<br> </br>
					<p:dataTable var="bss_stock"
						value="#{ListItemBean.listItemForm.eamSnapshotBssO}"
						filterDelay="#{SystemConfigBean.filetDelay}"
						filteredValue="#{ListItemBean.listItemForm.filterEamSnapshotBssO}"
						paginator="true" rows="20" paginatorPosition="bottom"
						id="bss_stock">

						<f:facet name="header">
							<i18n:outputText var="i18n" value="BSS_stock_info">
								<h:outputText value="#{i18n}" />
							</i18n:outputText>
						</f:facet>

						<p:column filterBy="#{SystemConfigBean.locationMapALL[bss_stock.siteid]}"
							filterMatchMode="contains">
							<f:facet name="header">
										申請廠區
									</f:facet>
							<h:outputText value="#{SystemConfigBean.locationMapALL[bss_stock.siteid]}" />
						</p:column>

						<p:column filterBy="#{bss_stock.shop}" filterMatchMode="contains">
							<f:facet name="header">
										Fab
									</f:facet>
							<h:outputText value="#{bss_stock.shop}" />
						</p:column>
						<p:column filterBy="#{bss_stock.dept}" filterMatchMode="contains">
							<f:facet name="header">
										部門代碼
									</f:facet>
							<h:outputText value="#{bss_stock.dept}" />
						</p:column>
						<p:column filterBy="#{bss_stock.sublocation}"
							filterMatchMode="contains">
							<f:facet name="header">
										儲位
									</f:facet>
							<h:outputText value="#{bss_stock.sublocation}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										庫存量
									</f:facet>
							<h:outputText value="#{bss_stock.qty}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										0~5天庫存數量
									</f:facet>
							<h:outputText value="#{bss_stock.qty1}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										5~7天庫存數量
									</f:facet>
							<h:outputText value="#{bss_stock.qty2}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										7~15天庫存數量
									</f:facet>
							<h:outputText value="#{bss_stock.qty3}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										15~30天庫存數量
									</f:facet>
							<h:outputText value="#{bss_stock.qty4}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										30~天庫存數量
									</f:facet>
							<h:outputText value="#{bss_stock.qty5}" />
						</p:column>
					</p:dataTable>
					<p:panelGrid columns="2">
						<p:panel header="Export All Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="bss_stock"
									fileName="BssStorInfo" />
							</h:commandLink>
						</p:panel>

						<p:panel header="Export Page Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="bss_stock"
									fileName="BssStorInfo" pageOnly="true" />
							</h:commandLink>
						</p:panel>
					</p:panelGrid>
				</p:tab>
				<p:tab id="tab5" title="控管異動歷史與採購現況">
					<h:panelGrid columns="2" cellpadding="4">
						<i18n:outputText var="i18n" value="itemnum">
							<h:outputText value="#{i18n}" /> :
								</i18n:outputText>
						<h:outputText value="#{ListItemBean.listItemForm.listItemBeanItem.itemnum}" />
						<i18n:outputText var="i18n" value="description">
							<h:outputText value="#{i18n}" /> :
								</i18n:outputText>
						<h:outputText value="#{ListItemBean.listItemForm.listItemBeanItem.description}" />
					</h:panelGrid>

					<p:dataTable var="mc_history" widgetVar="mc_history"
						value="#{ListItemBean.listItemForm.listItemBeanPrlineVO}"
						filterDelay="#{SystemConfigBean.filetDelay}"
						filteredValue="#{ListItemBean.listItemForm.filterListItemBeanPrlineVO}"
						paginator="true" paginatorPosition="bottom" rows="10"
						id="mc_history">
						<f:facet name="header">
							<i18n:outputText var="i18n" value="mc_history">
								<h:outputText value="#{i18n}" />
							</i18n:outputText>
						</f:facet>
						<c:set var="locationSite" value="#{SystemConfigBean.locationMap[mc_history['SITEID']].locationSiteMap.locationSite}" />
						<p:column filterBy="#{locationSite!=null?locationSite:'失效區域'}" filterMatchMode="contains">
							 <f:facet name="filter">
				                <p:selectOneMenu onchange="PF('mc_history').filter()" >
				                    <f:selectItem itemLabel="Select One" itemValue="#{null}" noSelectionOption="true" />
				                    <f:selectItem itemLabel="失效區域" itemValue="失效區域" />
				                    <f:selectItems value="#{SystemConfigBean.lSiteOption}" />
				                </p:selectOneMenu>
				            </f:facet>
							<f:facet name="header">
										區域
							</f:facet>
							<h:outputText value="#{locationSite}" />
						</p:column>
						<p:column filterBy="#{SystemConfigBean.locationMap[mc_history['SITEID']].organizationCode}"
							filterMatchMode="contains">
							<f:facet name="header">
										廠別
									</f:facet>
							<h:outputText value="#{SystemConfigBean.locationMap[mc_history['SITEID']].organizationCode}" />
						</p:column>
						<p:column filterBy="#{mc_history['STOREROOM']}"
							filterMatchMode="contains">
							<f:facet name="header">
										倉別
									</f:facet>
							<h:outputText value="#{mc_history['STOREROOM']}" id="emp_no" />
						</p:column>

						<p:column>
							<f:facet name="header">申請單號</f:facet>
							<h:outputText value="#{mc_history['PRNUM']}" />
						</p:column>
						<p:column
							filterBy="#{SystemConfigBean.parameterMap[mc_history['STATUS']]}"
							filterMatchMode="contains">
							<f:facet name="header">狀態</f:facet>
							<h:outputText
								value="#{SystemConfigBean.parameterMap[mc_history['STATUS']]}" />
						</p:column>
						<p:column filterBy="#{mc_history['ITEMNUM']}" filterMatchMode="contains">
							<f:facet name="header">料號</f:facet>
							<h:outputText value="#{mc_history['ITEMNUM']}" />
						</p:column>
						<p:column
							rendered="#{ListItemBean.listItemForm.listItemBeanItem.commoditygroup!=SystemConfigBean.materialR94 and 
													ListItemBean.listItemForm.listItemBeanItem.commoditygroup!=SystemConfigBean.materialR2}">
							<f:facet name="header">新增/下修月用量</f:facet>
							<h:outputText value="#{mc_history['MINLEVEL']}" />
						</p:column>
						<p:column
							rendered="#{ListItemBean.listItemForm.listItemBeanItem.commoditygroup==SystemConfigBean.materialR94 or 
													ListItemBean.listItemForm.listItemBeanItem.commoditygroup==SystemConfigBean.materialR2}">
							<f:facet name="header">新增/下修 月平均耗用量</f:facet>
							<h:outputText value="#{mc_history['DAVGUSEQTY']}" />
						</p:column>
						<p:column
							rendered="#{ListItemBean.listItemForm.listItemBeanItem.commoditygroup==SystemConfigBean.materialR94 or 
													ListItemBean.listItemForm.listItemBeanItem.commoditygroup==SystemConfigBean.materialR2}">
							<f:facet name="header">新增/下修 最低安全存</f:facet>
							<h:outputText value="#{mc_history['SSTOCK']}" />
						</p:column>
						<p:column
							rendered="#{ListItemBean.listItemForm.listItemBeanItem.commoditygroup==SystemConfigBean.materialR94 or 
													ListItemBean.listItemForm.listItemBeanItem.commoditygroup==SystemConfigBean.materialR2}">
							<f:facet name="header">新增/下修 重訂購量</f:facet>
							<h:outputText value="#{mc_history['MINLEVEL']}" />
						</p:column>
						<p:column>
							<f:facet name="header">最新單價</f:facet>
							<h:outputText value="#{mc_history['UNITCOST']}" />
						</p:column>
						<p:column>
							<f:facet name="header">幣別</f:facet>
							<h:outputText value="#{mc_history['CURRENCYCODE']}" />
						</p:column>
						<p:column>
							<f:facet name="header">預估總價</f:facet>
							<h:outputText value="#{mc_history['LINECOST']}" />
						</p:column>
						<p:column filterBy="#{mc_history['DISPLAY_NAME']}"
							filterMatchMode="contains">
							<f:facet name="header">姓名</f:facet>
							<h:outputText value="#{mc_history['DISPLAY_NAME']}" />
						</p:column>
						<p:column filterBy="#{mc_history['M_DEPT']}"
							filterMatchMode="contains">
							<f:facet name="header">部門代碼</f:facet>
							<h:outputText value="#{mc_history['M_DEPT']}" />
						</p:column>
						<p:column>
							<f:facet name="header">申請日期</f:facet>
							<h:outputText value="#{mc_history['ISSUEDATE']}" />
						</p:column>
					</p:dataTable>
					<p:panelGrid columns="2">
						<p:panel header="Export All Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="mc_history" fileName="MCINFO" />
							</h:commandLink>
						</p:panel>

						<p:panel header="Export Page Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="mc_history" fileName="MCINFO"
									pageOnly="true" />
							</h:commandLink>
						</p:panel>
					</p:panelGrid>
					<br></br>
					<p:dataTable var="pr_status" widgetVar="pr_status"
						value="#{ListItemBean.listItemForm.listItemBeanPrlineStatusVO}"
						filterDelay="#{SystemConfigBean.filetDelay}"
						filteredValue="#{ListItemBean.listItemForm.filterListItemBeanPrlineStatusVO}"
						paginator="true" paginatorPosition="bottom" rows="10"
						id="pr_status">
						<f:facet name="header">MRO請購狀況</f:facet>
						<c:set var="locationSite" value="#{SystemConfigBean.locationMap[pr_status['SITEID']].locationSiteMap.locationSite}" />
						<p:column filterBy="#{locationSite!=null?locationSite:'失效區域'}" filterMatchMode="contains">
							 <f:facet name="filter">
				                <p:selectOneMenu onchange="PF('pr_status').filter()" >
				                    <f:selectItem itemLabel="Select One" itemValue="#{null}" noSelectionOption="true" />
				                    <f:selectItem itemLabel="失效區域" itemValue="失效區域" />
				                    <f:selectItems value="#{SystemConfigBean.lSiteOption}" />
				                </p:selectOneMenu>
				            </f:facet>
							<f:facet name="header">
										區域
							</f:facet>
							<h:outputText value="#{locationSite}" />
						</p:column>
						<p:column filterBy="#{SystemConfigBean.locationMap[pr_status['SITEID']].organizationCode}"
							filterMatchMode="contains">
							<f:facet name="header">
										廠別
									</f:facet>
							<h:outputText value="#{SystemConfigBean.locationMap[pr_status['SITEID']].organizationCode}" />
						</p:column>
						<p:column filterBy="#{pr_status['STOREROOM']}"
							filterMatchMode="contains">
							<f:facet name="header">
										倉別
									</f:facet>
							<h:outputText value="#{pr_status['STOREROOM']}" />
						</p:column>

						<p:column filterBy="#{pr_status['PRNUM']}"
							filterMatchMode="contains">
							<f:facet name="header">
										MRO申請單號
									</f:facet>
							<h:outputText value="#{pr_status['PRNUM']}" />
						</p:column>
						<p:column filterBy="#{pr_status['STATUS']}"
							filterMatchMode="contains">
							<f:facet name="header">
										MRO申請單狀態
									</f:facet>
							<h:outputText value="#{SystemConfigBean.parameterMap[pr_status['STATUS']]}" />
						</p:column>
						<p:column>
							<f:facet name="header">料號</f:facet>
							<h:outputText value="#{pr_status['ITEMNUM']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										申請量
									</f:facet>
							<h:outputText value="#{pr_status['PMREQQTY']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										項次
									</f:facet>
							<h:outputText value="#{pr_status['PRLINENUM']}" />
						</p:column>
						<p:column filterBy="#{pr_status['DISPLAY_NAME']}"
							filterMatchMode="contains">
							<f:facet name="header">
										申請人
									</f:facet>
							<h:outputText value="#{pr_status['DISPLAY_NAME']}" />
						</p:column>
						<p:column filterBy="#{pr_status['M_DEPT']}"
							filterMatchMode="contains">
							<f:facet name="header">
										部門代碼
									</f:facet>
							<h:outputText value="#{pr_status['M_DEPT']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										EP請購單開立日期
									</f:facet>
							<h:outputText value="#{pr_status['EPMALL_CREATE_DATE']}" />
						</p:column>
						<p:column filterBy="#{pr_status['ERP_PRNUM']}"
							filterMatchMode="contains">
							<f:facet name="header">
										EP請購單編號 
									</f:facet>
							<h:outputText value="#{pr_status['ERP_PRNUM']}" />
						</p:column>
						<p:column filterBy="#{pr_status['ERP_PR_LINE_NUM']}"
							filterMatchMode="contains">
							<f:facet name="header">
										EP請購單項次
									</f:facet>
							<h:outputText value="#{pr_status['ERP_PR_LINE_NUM']}" />
						</p:column>
						<p:column filterBy="#{pr_status['ERP_PR_STATUS_DESCRIPTION']}"
							filterMatchMode="contains">
							<f:facet name="header">
										EP請購項目狀態
									</f:facet>
							<h:outputText value="#{pr_status['ERP_PR_STATUS_DESCRIPTION']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										預設採購員
									</f:facet>
							<h:outputText value="#{pr_status['PR_BUYER_NAME']}" />
						</p:column>
					</p:dataTable>
					<p:panelGrid columns="2">
						<p:panel header="Export All Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="pr_status" fileName="PrInfo" />
							</h:commandLink>
						</p:panel>

						<p:panel header="Export Page Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="pr_status" fileName="PrInfo"
									pageOnly="true" />
							</h:commandLink>
						</p:panel>
					</p:panelGrid>
					<br></br>
					<p:dataTable var="po_status" widgetVar="po_status"
						value="#{ListItemBean.listItemForm.listItemBeanPolineStatusVO}"
						filterDelay="#{SystemConfigBean.filetDelay}"
						filteredValue="#{ListItemBean.listItemForm.filterListItemBeanPolineStatusVO}"
						paginator="true" paginatorPosition="bottom"  rows="10" id="po_status">
						<f:facet name="header">
							<i18n:outputText var="i18n" value="po_status">
								<h:outputText value="#{i18n}" />
							</i18n:outputText>
						</f:facet>
						<c:set var="locationSite" value="#{SystemConfigBean.locationMap[po_status['ORGANIZATION_ID']].locationSiteMap.locationSite}" />
						<p:column filterBy="#{locationSite!=null?locationSite:'失效區域'}" filterMatchMode="contains">
							 <f:facet name="filter">
				                <p:selectOneMenu onchange="PF('po_status').filter()" >
				                    <f:selectItem itemLabel="Select One" itemValue="#{null}" noSelectionOption="true" />
				                    <f:selectItem itemLabel="失效區域" itemValue="失效區域" />
				                    <f:selectItems value="#{SystemConfigBean.lSiteOption}" />
				                </p:selectOneMenu>
				            </f:facet>
							<f:facet name="header">
										區域
							</f:facet>
							<h:outputText value="#{locationSite}" />
						</p:column>
						<p:column filterBy="#{SystemConfigBean.locationMap[po_status['ORGANIZATION_ID']].organizationCode}"
							filterMatchMode="contains">
							<f:facet name="header">
										廠別
									</f:facet>
							<h:outputText value="#{SystemConfigBean.locationMap[po_status['ORGANIZATION_ID']].organizationCode}" />
						</p:column>
						<p:column filterBy="#{po_status['DESTINATION_SUBINVENTORY']}"
							filterMatchMode="contains">
							<f:facet name="header">
								PO倉別
							</f:facet>
							<h:outputText value="#{po_status['DESTINATION_SUBINVENTORY']}" />
						</p:column>

						<p:column filterBy="#{po_status['PO_NO']}" filterMatchMode="contains">
							<f:facet name="header">
								訂單編號
							</f:facet>
							<h:outputText value="#{po_status['PO_NO']}" />
						</p:column>
						<p:column>
							<f:facet name="header">料號</f:facet>
							<h:outputText value="#{po_status['PART_NO']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								訂單項次
							</f:facet>
							<h:outputText value="#{po_status['PO_LINE_NO']}" />
						</p:column>
						<p:column filterBy="#{po_status['PR_NO']}"
							filterMatchMode="contains">
							<f:facet name="header">
								請購單編號
							</f:facet>
							<h:outputText value="#{po_status['PR_NO']}" />
						</p:column>
						<p:column filterBy="#{po_status['PR_LINE_NO']}"
							filterMatchMode="contains">
							<f:facet name="header">
								請購單項次
							</f:facet>
							<h:outputText value="#{po_status['PR_LINE_NO']}" />
						</p:column>
						<p:column filterBy="#{po_status['LINE_CLOSED_CODE']}"
							filterMatchMode="contains">
							<f:facet name="header">
								訂單項目狀態
							</f:facet>
							<h:outputText value="#{po_status['LINE_CLOSED_CODE']}" />
						</p:column>
						<p:column filterBy="#{po_status['PO_STATUS']}"
							filterMatchMode="contains">
							<f:facet name="header">
								訂單狀態 
							</f:facet>
							<h:outputText value="#{po_status['PO_STATUS']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								訂購量
							</f:facet>
							<h:outputText value="#{po_status['QUANTITY']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								IQC
							</f:facet>
							<h:outputText value="#{po_status['UNDELIVER_QTY']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								未交量
							</f:facet>
							<h:outputText value="#{po_status['ERPUNRECEIVEDQTY']}" />
						</p:column>
						<p:column filterBy="#{po_status['PO_BUYER_NAME']}"
							filterMatchMode="contains">
							<f:facet name="header">
								採購員姓名
							</f:facet>
							<h:outputText value="#{po_status['PO_BUYER_NAME']}" />
						</p:column>
						<p:column filterBy="#{po_status['PO_VENDOR']}"
							filterMatchMode="contains">
							<f:facet name="header">
								供應商
							</f:facet>
							<h:outputText value="#{po_status['PO_VENDOR']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										PO交期
									</f:facet>
							<h:outputText value="#{po_status['PROMISED_DATE']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										供應商confirm交期
									</f:facet>
							<h:outputText value="#{po_status['CONFIRM_PROMISE_DATE']}" />
						</p:column>
						<p:column filterBy="#{po_status['PRNUM']}" filterMatchMode="contains">
							<f:facet name="header">
								MRO申請單號
							</f:facet>
							<h:outputText value="#{po_status['PRNUM']}" />
						</p:column>
						<p:column filterBy="#{po_status['DISPLAY_NAME']}"
							filterMatchMode="contains">
							<f:facet name="header">
								MRO申請人姓名
							</f:facet>
							<h:outputText value="#{po_status['DISPLAY_NAME']}" />
						</p:column>
						<p:column filterBy="#{po_status['M_DEPT']}"
							filterMatchMode="contains">
							<f:facet name="header">
								MRO申請部門代碼 
							</f:facet>
							<h:outputText value="#{po_status['M_DEPT']}" />
						</p:column>
					</p:dataTable>
					<p:panelGrid columns="2">
						<p:panel header="Export All Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="po_status" fileName="PoInfo" />
							</h:commandLink>
						</p:panel>

						<p:panel header="Export Page Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="po_status" fileName="PoInfo"
									pageOnly="true" />
							</h:commandLink>
						</p:panel>
					</p:panelGrid>
				</p:tab>
				<p:tab id="tab6" title="使用設備">
					<h:panelGrid columns="2" cellpadding="4">
						<i18n:outputText var="i18n" value="itemnum">
							<h:outputText value="#{i18n}" /> :
								</i18n:outputText>
						<h:outputText value="#{ListItemBean.listItemForm.listItemBeanItem.itemnum}" />
						<i18n:outputText var="i18n" value="description">
							<h:outputText value="#{i18n}" /> :
								</i18n:outputText>
						<h:outputText value="#{ListItemBean.listItemForm.listItemBeanItem.description}" />
					</h:panelGrid>

					<p:dataTable var="asset"
						value="#{ListItemBean.listItemForm.listItemBeanSparepartVO}" paginator="true"
						rows="20" id="asset">
						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="sparepart.assetnum">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{asset.assetnum}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="asset.description">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{asset.assetDescription}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="sparepart.quantity">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{asset.quantity}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="sparepart.description">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{asset.description}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<i18n:outputText var="i18n" value="sparepart.siteid">
									<h:outputText value="#{i18n}" />
								</i18n:outputText>
							</f:facet>
							<h:outputText value="#{SystemConfigBean.locationMapALL[asset.siteid]}" />
						</p:column>
					</p:dataTable>
				</p:tab>
				<p:tab id="tab7" title="領退料/廠調紀錄/PO入料記錄">
					<h:panelGrid columns="2" cellpadding="4">
						<i18n:outputText var="i18n" value="itemnum">
							<h:outputText value="#{i18n}" /> :
								</i18n:outputText>
						<h:outputText value="#{ListItemBean.listItemForm.listItemBeanItem.itemnum}" />
						<i18n:outputText var="i18n" value="description">
							<h:outputText value="#{i18n}" /> :
								</i18n:outputText>
						<h:outputText value="#{ListItemBean.listItemForm.listItemBeanItem.description}" />
					</h:panelGrid>

					<p:dataTable var="matusetrans" widgetVar="matusetrans"
						value="#{ListItemBean.listItemForm.listItemBeanMatusetransVO}"
						filterDelay="#{SystemConfigBean.filetDelay}"
						filteredValue="#{ListItemBean.listItemForm.filterListItemBeanMatusetransVO}"
						paginator="true" paginatorPosition="bottom"  rows="10" id="matusetrans">

						<f:facet name="header">
							<i18n:outputText var="i18n" value="matusetrans">
								<h:outputText value="#{i18n}" />
							</i18n:outputText>
						</f:facet>
						<c:set var="locationSite" value="#{SystemConfigBean.locationMap[matusetrans.siteid].locationSiteMap.locationSite}" />
						<p:column filterBy="#{locationSite!=null?locationSite:'失效區域'}" filterMatchMode="contains">
							 <f:facet name="filter">
				                <p:selectOneMenu onchange="PF('matusetrans').filter()" >
				                    <f:selectItem itemLabel="Select One" itemValue="#{null}" noSelectionOption="true" />
				                    <f:selectItem itemLabel="失效區域" itemValue="失效區域" />
				                    <f:selectItems value="#{SystemConfigBean.lSiteOption}" />
				                </p:selectOneMenu>
				            </f:facet>
							<f:facet name="header">
										區域
							</f:facet>
							<h:outputText value="#{locationSite}" />
						</p:column>
						<p:column filterBy="#{SystemConfigBean.locationMapALL[matusetrans.siteid]}"
							filterMatchMode="contains">
							<f:facet name="header">
								廠區
							</f:facet>
							<h:outputText value="#{SystemConfigBean.locationMapALL[matusetrans.siteid]}" />
						</p:column>
						<p:column filterBy="#{matusetrans.storeloc}"
							filterMatchMode="contains">
							<f:facet name="header">
								倉別
							</f:facet>
							<h:outputText value="#{matusetrans.storeloc}" />
						</p:column>
						<p:column filterBy="#{matusetrans.itemnum}" filterMatchMode="contains">
							<f:facet name="header">料號</f:facet>
							<h:outputText value="#{matusetrans.itemnum}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								異動日期
							</f:facet>
							<h:outputText value="#{matusetrans.transdate}">
								<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss"
									timeZone="GMT+8" />
							</h:outputText>
						</p:column>
						<p:column>
							<f:facet name="header">
								數量
							</f:facet>
							<h:outputText value="#{matusetrans.quantity}" />
						</p:column>
						<p:column filterBy="#{matusetrans.binnum}"
							filterMatchMode="contains">
							<f:facet name="header">
								領用部門
							</f:facet>
							<h:outputText value="#{matusetrans.binnum}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										雜收發單/過帳編號
									</f:facet>
							<h:outputText value="#{matusetrans.refwo}" />
						</p:column>
					</p:dataTable>
					<p:panelGrid columns="2">
						<p:panel header="Export All Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="matusetrans"
									fileName="ItenRecode" />
							</h:commandLink>
						</p:panel>

						<p:panel header="Export Page Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="matusetrans"
									fileName="ItenRecode" pageOnly="true" />
							</h:commandLink>
						</p:panel>
					</p:panelGrid>
					<br> </br>
					<p:dataTable var="matrectrans" widgetVar="matrectrans"
						value="#{ListItemBean.listItemForm.listItemBeanMatrectransVO}"
						filterDelay="#{SystemConfigBean.filetDelay}"
						filteredValue="#{ListItemBean.listItemForm.filterListItemBeanMatrectransVO}"
						paginator="true" paginatorPosition="bottom"  rows="10" id="matrectrans">

						<f:facet name="header">
							廠調紀錄
						</f:facet>
						<c:set var="locationSite" value="#{SystemConfigBean.locationMap[matrectrans.siteid].locationSiteMap.locationSite}" />
						<p:column filterBy="#{locationSite!=null?locationSite:'失效區域'}" filterMatchMode="contains">
							 <f:facet name="filter">
				                <p:selectOneMenu onchange="PF('matrectrans').filter()" >
				                    <f:selectItem itemLabel="Select One" itemValue="#{null}" noSelectionOption="true" />
				                    <f:selectItem itemLabel="失效區域" itemValue="失效區域" />
				                    <f:selectItems value="#{SystemConfigBean.lSiteOption}" />
				                </p:selectOneMenu>
				            </f:facet>
							<f:facet name="header">
										區域
							</f:facet>
							<h:outputText value="#{locationSite}" />
						</p:column>
						<p:column filterBy="#{SystemConfigBean.locationMapALL[matrectrans.siteid]}"
							filterMatchMode="contains">
							<f:facet name="header">
								廠區
							</f:facet>
							<h:outputText value="#{SystemConfigBean.locationMapALL[matrectrans.siteid]}" />
						</p:column>
						<p:column filterBy="#{matrectrans.tostoreloc}"
							filterMatchMode="contains">
							<f:facet name="header">
								倉別(位置)
							</f:facet>
							<h:outputText value="#{matrectrans.tostoreloc}" />
						</p:column>
						<p:column filterBy="#{matrectrans.itemnum}" filterMatchMode="contains">
							<f:facet name="header">料號</f:facet>
							<h:outputText value="#{matrectrans.itemnum}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										收料日期
									</f:facet>
							<h:outputText value="#{matrectrans.transdate}">
								<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss"
									timeZone="GMT+8" />
							</h:outputText>
						</p:column>
						<p:column>
							<f:facet name="header">
										數量
									</f:facet>
							<h:outputText value="#{matrectrans.quantity}" />
						</p:column>
					</p:dataTable>
					<p:panelGrid columns="2">
						<p:panel header="Export All Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="matrectrans"
									fileName="SotreRecode" />
							</h:commandLink>
						</p:panel>

						<p:panel header="Export Page Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="matrectrans"
									fileName="SotreRecode" pageOnly="true" />
							</h:commandLink>
						</p:panel>
					</p:panelGrid>
					<br> </br>
					<p:dataTable var="listItemBeanPoMatrectransVO" widgetVar="listItemBeanPoMatrectransVO"
						value="#{ListItemBean.listItemForm.listItemBeanPoMatrectransVO}"
						filterDelay="#{SystemConfigBean.filetDelay}"
						filteredValue="#{ListItemBean.listItemForm.filterListItemBeanPoMatrectransVO}"
						paginator="true" paginatorPosition="bottom"  rows="10" id="listItemBeanPoMatrectransVO">

						<f:facet name="header">
							PO入料紀錄
						</f:facet>
						<c:set var="locationSite" value="#{SystemConfigBean.locationMap[listItemBeanPoMatrectransVO.siteid].locationSiteMap.locationSite}" />
						<p:column filterBy="#{locationSite!=null?locationSite:'失效區域'}" filterMatchMode="contains">
							 <f:facet name="filter">
				                <p:selectOneMenu onchange="PF('listItemBeanPoMatrectransVO').filter()" >
				                    <f:selectItem itemLabel="Select One" itemValue="#{null}" noSelectionOption="true" />
				                    <f:selectItem itemLabel="失效區域" itemValue="失效區域" />
				                    <f:selectItems value="#{SystemConfigBean.lSiteOption}" />
				                </p:selectOneMenu>
				            </f:facet>
							<f:facet name="header">
										區域
							</f:facet>
							<h:outputText value="#{locationSite}" />
						</p:column>
						<p:column filterBy="#{SystemConfigBean.locationMapALL[listItemBeanPoMatrectransVO.siteid]}"
							filterMatchMode="contains">
							<f:facet name="header">
								廠區
							</f:facet>
							<h:outputText value="#{SystemConfigBean.locationMapALL[listItemBeanPoMatrectransVO.siteid]}" />
						</p:column>
						<p:column filterBy="#{listItemBeanPoMatrectransVO.tostoreloc}"
							filterMatchMode="contains">
							<f:facet name="header">
								倉別(位置)
							</f:facet>
							<h:outputText value="#{listItemBeanPoMatrectransVO.tostoreloc}" />
						</p:column>
						<p:column filterBy="#{listItemBeanPoMatrectransVO.itemnum}" filterMatchMode="contains">
							<f:facet name="header">料號</f:facet>
							<h:outputText value="#{listItemBeanPoMatrectransVO.itemnum}" />
						</p:column>
						<p:column>
							<f:facet name="header">
										入庫日期
									</f:facet>
							<h:outputText value="#{listItemBeanPoMatrectransVO.transdate}">
								<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss"
									timeZone="GMT+8" />
							</h:outputText>
						</p:column>
						<p:column>
							<f:facet name="header">
										數量
									</f:facet>
							<h:outputText value="#{listItemBeanPoMatrectransVO.quantity}" />
						</p:column>
					</p:dataTable>
					<p:panelGrid columns="2">
						<p:panel header="Export All Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="listItemBeanPoMatrectransVO"
									fileName="SotreRecode" />
							</h:commandLink>
						</p:panel>

						<p:panel header="Export Page Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="listItemBeanPoMatrectransVO"
									fileName="SotreRecode" pageOnly="true" />
							</h:commandLink>
						</p:panel>
					</p:panelGrid>
				</p:tab>
				<p:tab id="tab8" title="耗用紀錄">
					<h:panelGrid columns="2" cellpadding="4">
						<i18n:outputText var="i18n" value="itemnum">
							<h:outputText value="#{i18n}" /> :
								</i18n:outputText>
						<h:outputText value="#{ListItemBean.listItemForm.listItemBeanItem.itemnum}" />
						<i18n:outputText var="i18n" value="description">
							<h:outputText value="#{i18n}" /> :
								</i18n:outputText>
						<h:outputText value="#{ListItemBean.listItemForm.listItemBeanItem.description}" />
					</h:panelGrid>

					<p:dataTable var="eam_snapshot_bss_t" widgetVar="eam_snapshot_bss_t"
						filteredValue="#{ListItemBean.listItemForm.filterEamSnapshotBssT}"
						filterDelay="#{SystemConfigBean.filetDelay}"
						value="#{ListItemBean.listItemForm.eamSnapshotBssT}" paginator="true" rows="20"
						paginatorPosition="bottom" id="eam_snapshot_bss_t">
						<c:set var="locationSite" value="#{SystemConfigBean.locationMap[eam_snapshot_bss_t.siteid].locationSiteMap.locationSite}" />
						<p:column filterBy="#{locationSite!=null?locationSite:'失效區域'}"
							filterMatchMode="contains">
							 <f:facet name="filter">
				                <p:selectOneMenu onchange="PF('eam_snapshot_bss_t').filter()" >
				                    <f:selectItem itemLabel="Select One" itemValue="#{null}" noSelectionOption="true" />
				                    <f:selectItem itemLabel="失效區域" itemValue="失效區域" />
				                    <f:selectItems value="#{SystemConfigBean.lSiteOption}" />
				                </p:selectOneMenu>
				            </f:facet>
							<f:facet name="header">
										區域  
							</f:facet>
							<h:outputText value="#{locationSite}" />
						</p:column>
						<p:column filterBy="#{SystemConfigBean.locationMapALL[eam_snapshot_bss_t.siteid]}"
							filterMatchMode="contains">
							<f:facet name="header">
								廠區
							</f:facet>
							<h:outputText
								value="#{SystemConfigBean.locationMapALL[eam_snapshot_bss_t.siteid]}" />
						</p:column>
						<p:column filterBy="#{eam_snapshot_bss_t.itemnum}" filterMatchMode="contains">
							<f:facet name="header">料號</f:facet>
							<h:outputText value="#{eam_snapshot_bss_t.itemnum}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								交易日期
							</f:facet>
							<h:outputText value="#{eam_snapshot_bss_t.trkdate}">
								<f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8" />
							</h:outputText>
						</p:column>
						<p:column>
							<f:facet name="header">
								數量
							</f:facet>
							<h:outputText value="#{eam_snapshot_bss_t.qty}" />

						</p:column>
						<p:column filterBy="#{eam_snapshot_bss_t.dept}"
							filterMatchMode="contains">
							<f:facet name="header">
								耗用部門
							</f:facet>
							<h:outputText value="#{eam_snapshot_bss_t.dept}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								交易單號
							</f:facet>
							<h:outputText value="#{eam_snapshot_bss_t.trkno}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								儲位
							</f:facet>
							<h:outputText value="#{eam_snapshot_bss_t.sublocation}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								設備代碼
							</f:facet>
							<h:outputText value="#{eam_snapshot_bss_t.eqpid}" />
						</p:column>
					</p:dataTable>
					<p:panelGrid columns="2">
						<p:panel header="Export All Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="eam_snapshot_bss_t"
									fileName="eam_snapshot_bss_t" />
							</h:commandLink>
						</p:panel>

						<p:panel header="Export Page Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="eam_snapshot_bss_t"
									fileName="eam_snapshot_bss_t" pageOnly="true" />
							</h:commandLink>
						</p:panel>
					</p:panelGrid>
				</p:tab>
			</p:tabView>
		</h:form>
	</ui:define>
</ui:composition>
