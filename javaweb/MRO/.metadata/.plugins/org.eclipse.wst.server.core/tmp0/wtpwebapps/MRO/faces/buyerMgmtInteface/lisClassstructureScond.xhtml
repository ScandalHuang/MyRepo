
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:i18n="http://innolux.com/i18n">
	<h:form id="ListScondForm" prependId="false">
		<c:set var="form" value="#{ListClassstructureScondBean.form}" />
		<c:set var="size" value="#{form.list.size()>0}" />
		類別：<p:selectOneMenu value="#{form.sClassstructureid}" filter="true">
				<f:selectItem itemLabel="請選擇" itemValue="" />
				<f:selectItems value="#{form.option}" />
				<p:ajax update="listSecond" process="@form" 
					listener="#{ListClassstructureScondBean.onSearch}" />
			  </p:selectOneMenu>
		<br/><br/>
		<font color="red">
			* 清單引用範疇: 2nd source料號族群規格一致化比對(預設:僅屬性A319、A308、A105、A999可不同)
			<br/>*分類屬性新增、刪減時,需同步修改此清單
			<br/>*請注意excel上傳筆數與成功上傳筆數是否一致
		</font>
		<center>
			<p:dataTable var="list" paginatorPosition="bottom" id="listSecond"
				paginator="true" rows="10" value="#{form.list}" rowKey="#{list.id}"
				selection="#{ListClassstructureScondBean.form.deleteList}">
				<f:facet name="header">
					<p:commandButton value="選取全部" icon="ui-icon-circle-check"
						rendered="#{size}"
						actionListener="#{ListClassstructureScondBean.onSelectAll}"
						update="listSecond" />
					<p:commandButton value="刪除清單" icon="ui-icon-trash"
						rendered="#{size}"
						oncomplete="PF('deleteConfirmSecondBDialog').show();" />
				</f:facet>
				<p:column selectionMode="multiple" exportable="false"
					style="text-align:center;width:20px" />
				<p:column>
					<f:facet name="header">
							CLASSSTRUCTUREID(類別)
						</f:facet>
					<h:outputText value="#{list.classstructureid}" />
				</p:column>
				<p:column>
					<f:facet name="header">
							ASSETATTRID(屬性)
						</f:facet>
					<h:outputText value="#{list.assetattrid}" />
				</p:column>
				<p:column exportable="false">
					<f:facet name="header" exportable="false">
							更新人
						</f:facet>
					<h:outputText value="#{list.lastUpdateBy}" />
				</p:column>
				<p:column exportable="false">
					<f:facet name="header">
							更新日期
						</f:facet>
					<h:outputText value="#{list.lastUpdate}">
						<f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8" />
					</h:outputText>
				</p:column>
			</p:dataTable>
			<p:panelGrid columns="2">
				<p:panel header="Export All Data">
					<h:commandLink>
						<p:graphicImage value="../../resources/images/excel.png" />
						<p:dataExporter type="xls" target="listSecond"
							fileName="#{currentDate.getTime()}E" />
					</h:commandLink>
				</p:panel>
				<p:panel header="Upload Data">
					<i18n:outputText value="upload.excel" />：
					<p:commandButton icon="ui-icon-disk" update=":fileUploadExcelForm"
						action="#{FileUploadExcelBean.excel(6,1)}"
						oncomplete="PF('ExcelFileUploadDialog').show();">
						<f:setPropertyActionListener
							target="#{FileUploadExcelBean.object}"
							value="#{ListClassstructureScondBean}" />
						<f:setPropertyActionListener
							target="#{FileUploadExcelBean.updateView}"
							value="tabView:ListScondForm" />
					</p:commandButton>
				</p:panel>
			</p:panelGrid>
		</center>
	</h:form>

	<p:confirmDialog id="deleteConfirmSecondBDialog" message="確定刪除清單?"
		width="300" header="確定刪除清單" widgetVar="deleteConfirmSecondBDialog"
		appendTo="@(body)">
		<h:form id="deleteConfirmDialogSecondForm" prependId="false">
			<p:commandButton value="Yes Sure"
				oncomplete="PF('deleteConfirmSecondBDialog').hide();"
				actionListener="#{ListClassstructureScondBean.onDelete}"
				update=":tabView:ListScondForm" icon="ui-icon-circle-check" />
			<p:commandButton value="Not Yet"
				onclick="PF('deleteConfirmSecondBDialog').hide();" type="button"
				icon="ui-icon-close" />
		</h:form>
	</p:confirmDialog>
</ui:composition>
