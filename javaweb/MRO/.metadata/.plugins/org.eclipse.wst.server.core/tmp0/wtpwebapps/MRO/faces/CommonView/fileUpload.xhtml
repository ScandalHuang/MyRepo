<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:i18n="http://innolux.com/i18n">
	<p:dialog id="FileUploadDialog" header="FileUpload"
		widgetVar="FileUploadDialog" modal="true" appendTo="@(body)"
		width="500">
		<p:ajax event="close" listener="#{FileUploadBean.onUpdatePage}" />
		<h:form id="fileUploadForm" prependId="false"
			enctype="multipart/form-data">
			<p:outputPanel rendered="#{FileUploadBean.fileUploadForm.editButton}">
				<font color="red">
					*檔案數量限制：#{FileUploadBean.fileUploadForm.fileLimit}個<BR />
					*檔案大小限制：#{FileUploadBean.fileUploadForm.sizeLimit/1024/1024}MB <BR />
					*檔案型態限制：#{FileUploadBean.fileUploadForm.allowTypesText}
				</font>
			</p:outputPanel>
			<p:fileUpload fileUploadListener="#{FileUploadBean.handleFileUpload}"
				auto="true" mode="advanced" update="listAttachment"
				rendered="#{FileUploadBean.fileUploadForm.editButton}"
				showButtons="false"
				sizeLimit="#{FileUploadBean.fileUploadForm.sizeLimit}"
				allowTypes="#{FileUploadBean.fileUploadForm.allowTypes}" />
			<h3>Upload File</h3>
			<p:dataList value="#{FileUploadBean.fileUploadForm.listAttachment}"
				var="listAttachment" id="listAttachment" type="ordered">
				<p:commandButton update="listAttachment"
					style="width:20px;height:20px;"
					rendered="#{FileUploadBean.fileUploadForm.editButton}"
					actionListener="#{FileUploadBean.fileDelete(listAttachment)}"
					icon="ui-icon-trash" title="Delete" />
				<h:commandLink
					actionListener="#{FileUploadBean.download(listAttachment)}"
					style="margin-right:20px;">
					<font color="blue">#{listAttachment.fileName} </font>
				</h:commandLink>

			</p:dataList>
		</h:form>
	</p:dialog>
</ui:composition>
