
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:i18n="http://innolux.com/i18n"
	template="/faces/template/template.xhtml">
	<ui:define name="page-content">
		<h:form id="listStoreCategoryChangeForm" prependId="false">

			<i18n:outputText value="site" />：
			<p:selectOneMenu value="#{ListStoreCategoryChangeBean.selectOrganization}"
				filter="true" filterMatchMode="startsWith" style="width:250px;"
				height="150">
				<f:selectItem itemLabel="請選擇" itemValue="" />
				<f:selectItems value="#{ListStoreCategoryChangeBean.organizationMap}" />
				<p:ajax update="selectLocation listInventory"
					listener="#{ListStoreCategoryChangeBean.changeOragnization}" process="@form"
					  />
			</p:selectOneMenu>
			&#160;&#160;&#160;&#160;&#160;&#160;&#160;
			<i18n:outputText value="store_room" />：
			<p:selectOneMenu id="selectLocation"
				value="#{ListStoreCategoryChangeBean.selectLocation}"
				filter="true" filterMatchMode="startsWith" style="width:150px;"
				height="150">
				<f:selectItem itemLabel="請選擇" itemValue="" />
				<f:selectItems value="#{ListStoreCategoryChangeBean.locationMap}" />
				<p:ajax update="listInventory"
					listener="#{ListStoreCategoryChangeBean.change}" process="@form"
					  />
			</p:selectOneMenu>
			<br />
			<br />

			<p:dataTable var="listInventory" paginatorPosition="bottom"
				id="listInventory" paginator="true" rows="10"
				value="#{ListStoreCategoryChangeBean.listInventory}">
				<f:facet name="header" style="text-align:left;">  
		           搜索結果：  #{ListStoreCategoryChangeBean.listInventory.size()} 筆
		        </f:facet>
				<p:columns value="#{ListStoreCategoryChangeBean.columns}" var="column"
					sortBy="#{listInventory[column.property]}"
					columnIndexVar="colIndex" style="text-align:center;">
					<f:facet name="header">
						<h:outputText value="#{column.header}" />
					</f:facet>
					<h:outputText value="#{listInventory[column.property]}" />
				</p:columns>
			</p:dataTable>
			<p:panelGrid columns="2">
				<p:panel header="Export All Data">
					<h:commandLink>
						<p:graphicImage value="../../resources/images/excel.png" />
						<p:dataExporter type="xls" target="listInventory"
							fileName="STORE_CATEGORY" />
					</h:commandLink>
				</p:panel>
				<p:panel header="Upload Data">
					<font color="red" size="1">＊只更新現有資料不執行新增動作</font><br />
					<i18n:outputText value="upload.excel" />：
					<p:commandButton icon="ui-icon-disk"
						update=":fileUploadExcelForm"
						action="#{FileUploadExcelBean.excel(3,1)}"
						 
						oncomplete="PF('ExcelFileUploadDialog').show();" />
						</p:panel>
					</p:panelGrid>
		</h:form>
		<p:dialog id="ExcelFileUploadDialog" header="ExcelFileUpload"
			widgetVar="ExcelFileUploadDialog" modal="true" appendTo="@(body)"
			width="600">
			<ui:include src="../CommonView/fileUploadExcel.xhtml" />
			<p:ajax event="close"
				listener="#{ListStoreCategoryChangeBean.uploadExcel}" 
				update=":listStoreCategoryChangeForm"
				  />
		</p:dialog>
	</ui:define>
</ui:composition>
