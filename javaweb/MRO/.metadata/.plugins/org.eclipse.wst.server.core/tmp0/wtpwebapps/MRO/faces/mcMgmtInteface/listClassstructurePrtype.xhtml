
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:i18n="http://innolux.com/i18n">
	<h:form id="listClassstructurePrtypeForm" prependId="false">
		<center>
			<p:panelGrid id="listClassstructurePrtypeHeader">
				<f:facet name="header">
					<p:row>
						<p:column colspan="2">
							<i18n:outputText value="apply.prtype.category.mgmt" />
						</p:column>
					</p:row>
				</f:facet>
				<p:row>
					<p:column>
						<i18n:outputText value="apply.prtype.category" />：
								</p:column>
					<p:column>
						<p:selectOneMenu
							value="#{ListClassstructurePrtypeBean.selectPrtype}"
							style="width:200px;">
							<f:selectItem itemLabel="請選擇" itemValue="" />
							<f:selectItems
								value="#{ListClassstructurePrtypeBean.prtypeOption}" />
							<p:ajax
								update=":tabView:listClassstructurePrtypeForm"
								listener="#{ListClassstructurePrtypeBean.query}" process="@form"
								  />
						</p:selectOneMenu>
						</p:column>
				</p:row>
				<p:row rendered="#{ListClassstructurePrtypeBean.selectPrtype!=null and 
							ListClassstructurePrtypeBean.selectPrtype!=''}">
					<p:column>
						<i18n:outputText value="pr.limit.request" /> <i18n:outputText value="list" />：
								</p:column>
					<p:column>
						<p:commandButton rendered="#{ListClassstructurePrtypeBean.editButton}"
							value="#{SystemConfigBean.parameterMap[ListClassstructurePrtypeBean.selectPrtype]}
							限制開單人員清單" icon="ui-icon-disk"
							update=":tabView:listPrtypeActiveMemberForm"
							action="#{ListPrtypeActiveMemberBean.onSearch}"
							oncomplete="PF('listPrtypeActiveMemberDialog').show();"
							  >
							<f:setPropertyActionListener 
								target="#{ListPrtypeActiveMemberBean.editButton}" 
								value="true"/>
							<f:setPropertyActionListener 
								target="#{ListPrtypeActiveMemberBean.selectPrtype}" 
								value="#{ListClassstructurePrtypeBean.selectPrtype}"/>
							</p:commandButton>
							
						<p:commandButton rendered="#{!ListClassstructurePrtypeBean.editButton}"
							value="#{SystemConfigBean.parameterMap[ListClassstructurePrtypeBean.selectPrtype]}
							限制開單人員清單" icon="ui-icon-disk"
							update=":tabView:listPrtypeActiveMemberForm"
							action="#{ListPrtypeActiveMemberBean.onSearch}"
							oncomplete="PF('listPrtypeActiveMemberDialog').show();"
							  >
							<f:setPropertyActionListener 
								target="#{ListPrtypeActiveMemberBean.editButton}" 
								value="false"/>
							<f:setPropertyActionListener 
								target="#{ListPrtypeActiveMemberBean.selectPrtype}" 
								value="#{ListClassstructurePrtypeBean.selectPrtype}"/>
							</p:commandButton>
					</p:column>
				</p:row>
				<p:row rendered="#{ListClassstructurePrtypeBean.selectPrtype!=null and 
							ListClassstructurePrtypeBean.selectPrtype!=''}">
					<p:column>
						<i18n:outputText value="pr.limit.budget.request" /> <i18n:outputText value="list" />：
								</p:column>
					<p:column>
						<p:commandButton 
							value="#{SystemConfigBean.parameterMap[ListClassstructurePrtypeBean.selectPrtype]}
							限制預算" icon="ui-icon-disk"
							update=":tabView:listPrtypeBudgetForm"
							actionListener="#{ListPrtypeBudgetBean.onSearch(ListClassstructurePrtypeBean.selectPrtype)}"
							oncomplete="PF('listPrtypeBudgetDialog').show();" />
					</p:column>
				</p:row>
				<p:row rendered="#{ListClassstructurePrtypeBean.editButton}">
					<p:column>
						<i18n:outputText value="ItemCategory" />：
								</p:column>
					<p:column>
						<p:selectOneMenu
							value="#{ListClassstructurePrtypeBean.selectitemCategory}">
							<f:selectItem itemLabel="請選擇" itemValue="" />
							<f:selectItems value="#{ListClassstructurePrtypeBean.itemCategoryOption}" />
							<p:ajax
								update=":tabView:listClassstructurePrtypeForm"
								listener="#{ListClassstructurePrtypeBean.query}" process="@form"
								  />
						</p:selectOneMenu>
					</p:column>
				</p:row>
				<p:row rendered="#{ListClassstructurePrtypeBean.editButton}">
					<p:column>
						<i18n:outputText value="class_structure_id" />：
								</p:column>
					<p:column>
						<p:selectOneMenu
							value="#{ListClassstructurePrtypeBean.selectClassstructureid}"
							filter="true">
							<f:selectItem itemLabel="請選擇" itemValue="" />
							<f:selectItems
								value="#{ListClassstructurePrtypeBean.classstructureOption}" />
						</p:selectOneMenu>
					</p:column>
				</p:row>
				<f:facet name="footer">
					<p:row rendered="#{ListClassstructurePrtypeBean.editButton}">
						<p:column colspan="2" style="text-align: center">
							<p:commandButton value="Add" 
								 icon="ui-icon-circle-check"
								actionListener="#{ListClassstructurePrtypeBean.updatePr('Add')}"
								update=":tabView:listClassstructurePrtypeForm"
								style="margin-top:5px" />
						</p:column>
					</p:row>
				</f:facet>
			</p:panelGrid>
		</center>
		<br />
		<p:dataTable var="listClassstructurePrtype" paginatorPosition="bottom"
			value="#{ListClassstructurePrtypeBean.listClassstructurePrtype}"
			paginator="true" rowKey="#{listClassstructurePrtype['ROWNUM']}"
			rows="10" id="listClassstructurePrtype">
			<p:column style="text-align:center;" width="100" 
				rendered="#{ListClassstructurePrtypeBean.editButton}">
				<f:facet name="header">
					Delete
				</f:facet>

				<p:commandButton value="Delete" 
					 icon="ui-icon-trash"
					action="#{ListClassstructurePrtypeBean.updatePr('Delete')}"
					update=":tabView:listClassstructurePrtypeForm"
					style="margin-top:5px" process="@form">
					<f:setPropertyActionListener
						target="#{ListClassstructurePrtypeBean.selectClassstructureid}"
						value="#{listClassstructurePrtype['CLASSSTRUCTUREID']}" />
				</p:commandButton>
			</p:column>
			<p:column sortBy="#{listClassstructurePrtype['PRTYPE_VALUE']}">
				<f:facet name="header">
					<i18n:outputText value="apply.prtype.category" />
				</f:facet>
				<h:outputText value="#{listClassstructurePrtype['PRTYPE_VALUE']}" />
			</p:column>
			<p:column sortBy="#{listClassstructurePrtype['CLASSSTRUCTUREID']}">
				<f:facet name="header">
					<i18n:outputText value="class_structure_id" />
				</f:facet>
				<h:outputText
					value="#{listClassstructurePrtype['CLASSSTRUCTUREID']}" />
			</p:column>
			<p:column sortBy="#{listClassstructurePrtype['DESCRIPTION']}">
				<f:facet name="header">
					<i18n:outputText value="Category.description" />
				</f:facet>
				<h:outputText value="#{listClassstructurePrtype['DESCRIPTION']}" />
			</p:column>
		</p:dataTable>
	</h:form>

	<p:dialog id="listPrtypeActiveMemberDialog" 
		header="限制開單人員清單"
		widgetVar="listPrtypeActiveMemberDialog" modal="true"
		appendTo="@(body)" width="900" height="500">
		<ui:include src="listPrtypeActiveMember.xhtml" />
	</p:dialog>
		<p:dialog id="listPrtypeBudgetDialog" 
		header="限制預算清單"
		widgetVar="listPrtypeBudgetDialog" modal="true"
		appendTo="@(body)" width="900" height="500">
		<ui:include src="listPrtypeBudget.xhtml" />
	</p:dialog>
</ui:composition>
