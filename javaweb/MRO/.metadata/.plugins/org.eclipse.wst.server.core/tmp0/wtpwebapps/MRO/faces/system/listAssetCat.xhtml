
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:i18n="http://innolux.com/i18n"
	template="/faces/template/template.xhtml">
	<ui:define name="page-content">

		<!-- Panel-TabView-Dynamic Content(Change Listener) -->
		

			<p:tabView id="tabView" cache="true">

				<p:tab id="tab1" title="清單">
					<h:form id="form" prependId="false">
					
					<p:panel id="panelSearch" header="Search Cat." toggleable="true"
						toggleSpeed="500" widgetVar="panelSearch">
						<div align="center">
							<p:panelGrid columns="6" style="width:100%;word-break:break-all;">

								<i18n:outputText value="class.structure1" />
								<i18n:outputText value="class.structure2" />
								<i18n:outputText value="class.structure3" /> 
								<i18n:outputText value="class.structure4" /> 
								<i18n:outputText value="cat_description" />
								<i18n:outputText value="" /> 

								<p:selectOneMenu id="sStructs1" value="#{ListAssetCatBean.sStructs1}"
									style="width:150px;text-align:left">
									<f:selectItems value="#{ListAssetCatBean.structs1}" />
									<p:ajax update="sStructs2 sStructs3 sStructs4"  listener="#{ListAssetCatBean.structChange(1)}" />
								</p:selectOneMenu>
								<p:selectOneMenu id="sStructs2" value="#{ListAssetCatBean.sStructs2}"
									style="width:150px;text-align:left">
									<f:selectItem itemLabel="Select" itemValue="" />  
									<f:selectItems value="#{ListAssetCatBean.structs2}" />
									<p:ajax  update="sStructs3"  listener="#{ListAssetCatBean.structChange(2)}" />
								</p:selectOneMenu>
								<p:selectOneMenu id="sStructs3" value="#{ListAssetCatBean.sStructs3}"
									style="width:150px;text-align:left">
									<f:selectItem itemLabel="Select" itemValue="" />  
									<f:selectItems value="#{ListAssetCatBean.structs3}" />
									<p:ajax update="sStructs4"  listener="#{ListAssetCatBean.structChange(3)}" />
								</p:selectOneMenu>
								<p:selectOneMenu id="sStructs4" value="#{ListAssetCatBean.sStructs4}"
									style="width:150px;text-align:left">
									<f:selectItem itemLabel="Select" itemValue="" />  
									<f:selectItems value="#{ListAssetCatBean.structs4}" />
								</p:selectOneMenu>
								<p:inputText value="#{ListAssetCatBean.description}" />


								<p:commandButton value="Search" update="listClassstructure"
									 
									actionListener="#{ListAssetCatBean.onSearch}" />
							</p:panelGrid>
						</div>
					</p:panel>


					<p:dataTable var="listClassstructure"
						value="#{ListAssetCatBean.listClassstructure}"
						paginator="true" rows="10" id="listClassstructure" paginatorPosition="bottom"
						editable="true">
						
						<p:ajax event="rowEdit" update="listClassstructure" listener="#{ListAssetCatBean.onEdit}" />
							
						<f:facet name="header">
							<i18n:outputText  value="Category.List" />
							<p:commandButton value="新增大分類" icon="ui-icon-plus" 
				            			update=":listClassstructureForm"
				            			action="#{ListClassstructureBean.onSearch}"  
				            			 
				            			oncomplete="PF('StructureDialog').show();" >
				            			<f:setPropertyActionListener value="" target="#{ListClassstructureBean.classstructure}" />
				            </p:commandButton>  
						</f:facet>
						
						<p:column> 
							<f:facet name="header">
								<i18n:outputText value="cat_id" />
							</f:facet>
							<h:outputText value="#{listClassstructure.classificationid}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<i18n:outputText value="cat_description" />
							</f:facet>
							<p:cellEditor>  
								<f:facet name="output">
									<h:outputText value="#{listClassstructure.description}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText  value="#{listClassstructure.description}" />
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column style="text-align:center">
							<f:facet name="header">
								<h:outputText value="Type" />
							</f:facet>
							<p:cellEditor>  
								<f:facet name="output">
									<h:outputText value="#{listClassstructure.type}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText  value="#{listClassstructure.type}" size="5" />
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column style="text-align:center">
							<f:facet name="header"> 
								<i18n:outputText value="childrenCat.YN" />(Y/N)
							</f:facet> 
							<p:cellEditor>  
								<f:facet name="output">
									<p:selectBooleanCheckbox value="#{ListAssetCatBean.dooleanCheckbox[listClassstructure.classstructureid]}" disabled="true" />
								</f:facet>
								<f:facet name="input">
									<p:selectBooleanCheckbox value="#{ListAssetCatBean.dooleanCheckbox[listClassstructure.classstructureid]}"/>
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column style="text-align:center">
							<f:facet name="header"> 
								<i18n:outputText value="Store.category" />
							</f:facet> 
							<p:cellEditor>  
								<f:facet name="output">
									<h:outputText value="#{SystemConfigBean.parameterMap[listClassstructure.storeCategory]}" />
								</f:facet>
								<f:facet name="input">
									<p:selectOneMenu id="storeCategory" rendered="#{listClassstructure.haschildren==0}"
										value="#{listClassstructure.storeCategory}" style="width:50px;text-align:left;">
										<f:selectItem itemLabel="Select" itemValue="" />
										<f:selectItems value="#{ListAssetCatBean.storeCategory}" />
									</p:selectOneMenu>
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column style="text-align:center">
							<f:facet name="header">
								<i18n:outputText value="inactive.date" />
							</f:facet>
							
				            <p:cellEditor>  
				         		<f:facet name="output">
									<h:outputText name="output" value="#{listClassstructure.inactiveDate}"   >
										<f:convertDateTime pattern="yyyy/MM/dd" timeZone="GMT+8" />
									</h:outputText>
								</f:facet>
				                <f:facet name="input">  
				                	<p:calendar value="#{listClassstructure.inactiveDate}" pattern="yyyy/MM/dd" showOn="button" />
				                </f:facet>  
				            </p:cellEditor>  
				            
						</p:column>
						
				        <p:column headerText="Edit" style="width:70px;text-align: center;">  
				            <p:rowEditor />  
				        </p:column>   
				      <!--   分類細項 -->
				     	<p:column headerText="View"  style="width:50px;text-align: center;">  
				            <p:commandButton  icon="ui-icon-search" title="View" 
				            			update=":listClassstructureForm"
				            			action="#{ListClassstructureBean.onSearch}"  
				            			oncomplete="PF('StructureDialog').show();" 
				            			style="width:20px;height:20px"
				            			 
				            			rendered="#{listClassstructure.haschildren==1}">  
				                <f:setPropertyActionListener value="#{listClassstructure}" target="#{ListClassstructureBean.classstructure}" />  
				            </p:commandButton>
				    <!--   屬性細項 -->
				            <p:commandButton  icon="ui-icon-search" title="View" 
				            			update=":listClassspecForm"
				            			action="#{ListClassspecBean.onSearch}"  
				            			oncomplete="PF('StructureDialog2').show();" 
				            			style="width:20px;height:20px"
				            			 
				            			rendered="#{listClassstructure.haschildren==0}">  
				                <f:setPropertyActionListener value="#{listClassstructure}" target="#{ListClassspecBean.classstructure}" />  
				            </p:commandButton>  
				        </p:column>  
					</p:dataTable>
					</h:form>
				</p:tab>

				<p:tab id="tab2" title="屬性" >
					<ui:include src="../CommonView/listAssetattribute.xhtml" />
				</p:tab>
<!-- 				<p:tab id="tab3" title="單位">
					<ui:include src="../CommonView/listMeasureunit.xhtml" />
				</p:tab> -->
			</p:tabView>

		<p:dialog id="StructureDialog" header="分類" widgetVar="StructureDialog"  modal="true"  
		appendTo="@(body)" >
			<ui:include src="../CommonView/listClassstructure.xhtml" />
			<p:ajax event="close" update=":tabView:form" listener="#{ListAssetCatBean.ondialogClose}"
			  /> 
		</p:dialog>
		<p:dialog id="StructureDialog2" header="屬性" widgetVar="StructureDialog2"  modal="true"  
		appendTo="@(body)" height="500">
			<ui:include src="../CommonView/listClassspec.xhtml" />
		</p:dialog>
	</ui:define>
</ui:composition>
