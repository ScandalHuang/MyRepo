
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:i18n="http://innolux.com/i18n"
	template="/faces/template/template.xhtml">
	<ui:define name="page-content">
		<ui:include src="../CommonView/fileUpload.xhtml" />
			<p:tabView id="tabView" cache="true"
				activeIndex="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.activeIndex}" >

 
				<p:tab id="tab1" >
					<f:facet name="title">
					<i18n:outputText value="item.site.transfer.apply" />
					<i18n:outputText value="list" />
					</f:facet>
				<h:form id="form" prependId="false">
					<div align="center">
			             <p:panelGrid id="search" style="width:100%;word-break:break-all;">
			             <f:facet name="header">
			             		<p:row> 
									<p:column><i18n:outputText value="apply.item.site" /></p:column>
									<p:column><i18n:outputText value="apply.num" /> / 
									<i18n:outputText value="itemnum" /></p:column>
									<p:column><i18n:outputText value="status" /></p:column>
									<p:column><i18n:outputText value="apply.by" /></p:column>
									<p:column><i18n:outputText value="ACTION" /></p:column>
									<p:column><i18n:outputText value="pr_issue_date" /></p:column>
									<p:column><i18n:outputText value="" /></p:column>
								</p:row>
						</f:facet>
								<p:row> 
									<p:column>
										<p:selectOneMenu 
										value="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.locationSite}">
										<f:selectItem itemValue="" itemLabel="請選擇" />
										<f:selectItems value="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.siteOption}" />
										</p:selectOneMenu>
									 </p:column>
									<p:column><p:inputText value="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.applyHeaderNum}" style="width:120px;" /></p:column>
									<p:column>
										<p:selectOneMenu id="status"  
										value="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.status}"
										style="width:90px;text-align:left;">
										<f:selectItem itemValue="" itemLabel="請選擇" />
										<f:selectItems value="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.selectStatus}" />
										</p:selectOneMenu>
									 </p:column>
									<p:column>
										<p:inputText value="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.createBy}" size="13"/>
										<p:commandButton icon="ui-icon-search" 
										oncomplete="PF('listEmployeeDialog').show();"  >
										<f:setPropertyActionListener
											target="#{ListEmployeeBean.object}"
											value="#{ApplyItemTransferSiteQueryBean}" />
										<f:setPropertyActionListener
											target="#{ListEmployeeBean.updateView}"
											value="tabView:search" />
										</p:commandButton>
									</p:column>
									<p:column>
										<p:selectOneMenu 
										value="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.action}"
										style="width:90px;text-align:left;">
										<f:selectItem itemValue="" itemLabel="請選擇" />
										<f:selectItems value="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.actionTypeOption}" />
										</p:selectOneMenu>
									 </p:column>
									<p:column>
										<p:calendar id="beginDate" value="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.beginDate}"  size="13" showOn="button" readonlyInput="true" />
										<p:commandButton icon="ui-icon-close" update="beginDate" style="width:24px;height:24px;" >
										<f:setPropertyActionListener target="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.beginDate}" value="" />
										</p:commandButton>
											 ~<br/>
										<p:calendar id="endDate" value="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.endDate}" size="13" showOn="button" readonlyInput="true" />
										<p:commandButton icon="ui-icon-close" update="endDate" style="width:24px;height:24px;"  >
										<f:setPropertyActionListener target="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.endDate}" value="" />
										</p:commandButton>
									</p:column>
								
									<p:column><p:commandButton  icon="ui-icon-search" value="Search"  
			                				actionListener="#{ApplyItemTransferSiteQueryBean.query}" update=":tabView"  style="margin-top:5px"/>
			                		</p:column> 
			                	</p:row>
			             </p:panelGrid>
			             </div>
			             <br/>
					<p:dataTable var="listItemTransferHeaderApply"
						paginatorPosition="bottom"
						value="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.listItemTransferHeaderApply}"
						selection="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.itemTransferHeaderApply}"
						rowKey="#{listItemTransferHeaderApply.applyHeaderId}" paginator="true" rows="10"
						selectionMode="single" id="listItemTransferHeaderApply">
						
						<p:ajax event="rowSelect" listener="#{ApplyItemTransferSiteQueryBean.selectApply}"
							update=":tabView" 
							  />
						<f:facet name="header" style="text-align:left;">  
					          	 搜索結果：  #{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.listItemTransferHeaderApply.size()} 筆
					    </f:facet>
						
						<p:column style="text-align:center"
							sortBy="#{listItemTransferHeaderApply.applyHeaderNum}">
							<f:facet name="header">
								<i18n:outputText value="apply.num" />
							</f:facet>
							<h:outputText
								value="#{listItemTransferHeaderApply.applyHeaderNum}" />

						</p:column>
						<p:column style="text-align:center"
							sortBy="#{SystemConfigBean.parameterMap[listItemTransferHeaderApply.status]}">
							<f:facet name="header">
								<i18n:outputText value="status" />
							</f:facet>
							<h:outputText
								value="#{SystemConfigBean.parameterMap[listItemTransferHeaderApply.status]}" />
						</p:column>
						<p:column style="text-align:center"
							sortBy="#{listItemTransferHeaderApply.locationSite}">
							<f:facet name="header">
							<i18n:outputText value="apply.item.site" />
							</f:facet>
							<h:outputText
								value="#{listItemTransferHeaderApply.locationSite}" />
						</p:column>
						<p:column style="text-align:center"
							sortBy="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.actionTypeMapping[
										listItemTransferHeaderApply.action]}">
							<f:facet name="header">
								<i18n:outputText value="ACTION" />
							</f:facet>
							<h:outputText
								value="#{ApplyItemTransferSiteQueryBean.itemTransferSiteForm.actionTypeMapping[
										listItemTransferHeaderApply.action]}" />
						</p:column>
						<p:column style="text-align:center"
							sortBy="#{listItemTransferHeaderApply.createBy}">
							<f:facet name="header">
								<i18n:outputText value="apply.by" />
							</f:facet>
							<h:outputText value="#{listItemTransferHeaderApply.createBy}" />

						</p:column>
						<p:column style="text-align:center"
							sortBy="#{listItemTransferHeaderApply.deptcode}">
							<f:facet name="header">
								<i18n:outputText value="dept_code" />
							</f:facet>
							<h:outputText value="#{listItemTransferHeaderApply.deptcode}" />
						</p:column>
						<p:column sortBy="#{listItemTransferHeaderApply.createDate}" style="text-align:center">
							<f:facet name="header">
								<i18n:outputText value="pr_issue_date" />
							</f:facet>
							<h:outputText value="#{listItemTransferHeaderApply.createDate}">
								<f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8" />
							</h:outputText>
						</p:column>
						<p:column sortBy="#{listItemTransferHeaderApply.headerRemark}">
							<f:facet name="header">
								<i18n:outputText value="command" />
							</f:facet>
							<h:outputText value="#{listItemTransferHeaderApply.headerRemark}"
								style="white-space: pre-wrap; word-wrap: break-word;" />
						</p:column>
					</p:dataTable>
					</h:form>
				</p:tab>
				<p:tab id="tab2" >
					<f:facet name="title">
					<i18n:outputText value="Apply.Info" />
					</f:facet>
					<ui:include src="applyItemTransferSiteQuery.xhtml" />
				</p:tab>
			</p:tabView>
		<p:dialog id="listEmployeeDialog"  widgetVar="listEmployeeDialog"  modal="true"  
		appendTo="@(body)" width="600">
		<f:facet name="header"><i18n:outputText value="List of Employee"/></f:facet>
			<ui:include src="../CommonView/listEmployee.xhtml" />
		</p:dialog>
	</ui:define>
</ui:composition>
