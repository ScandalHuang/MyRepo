<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:i18n="http://innolux.com/i18n"
	template="/faces/template/template.xhtml">
	<ui:define name="page-content">
		<p:tabView id="tabView" cache="true">
			<p:tab id="tab1">
				<f:facet name="title">
					<i18n:outputText value="Sap.Plant.Attribute.Managent" />
				</f:facet>
				<h:form id="listSapPlantAttributeForm" prependId="false">
			PLANT_CODE：
					<p:selectOneMenu
						value="#{ListSapPlantAttributeBean.selectPlantCode}" filter="true"
						filterMatchMode="startsWith" style="width:150px;" height="150">
						<f:selectItem itemLabel="請選擇" itemValue="" />
						<f:selectItems value="#{ListSapPlantAttributeBean.plantCodeMap}" />
						<p:ajax update="listSapPlantAttribute"
							listener="#{ListSapPlantAttributeBean.change}" process="@form"
							  />
					</p:selectOneMenu>
			&#160;&#160;&#160;&#160;&#160;&#160;&#160;
			MATERIAL_GROUP：
			<p:selectOneMenu
						value="#{ListSapPlantAttributeBean.selectMaterialGroup}"
						filter="true" filterMatchMode="startsWith" style="width:150px;"
						height="150">
						<f:selectItem itemLabel="請選擇" itemValue="" />
						<f:selectItems
							value="#{ListSapPlantAttributeBean.materialGroupMap}" />
						<p:ajax update="listSapPlantAttribute"
							listener="#{ListSapPlantAttributeBean.change}" process="@form"
							  />
					</p:selectOneMenu>
					<br />
					<br /><font color="red">*STORAGE_LOATION若為空值，請上傳 NULL</font>
					<p:dataTable var="listSapPlantAttribute" paginatorPosition="bottom"
						id="listSapPlantAttribute" paginator="true" rows="10"
						rowKey="#{listSapPlantAttribute.id}"
						selection="#{ListSapPlantAttributeBean.sapPlantAttributes}"
						value="#{ListSapPlantAttributeBean.listSapPlantAttribute}">
						<f:facet name="header" style="text-align:left;">  
		           			搜索結果：  #{ListSapPlantAttributeBean.listSapPlantAttribute.size()} 筆
							<br/>
							<p:commandButton value="選取全部" icon="ui-icon-circle-check"
								rendered="#{ListSapPlantAttributeBean.listSapPlantAttribute.size()>0}"
								actionListener="#{ListSapPlantAttributeBean.onSelectAll}" 
								update="listSapPlantAttribute" />
							<p:commandButton value="刪除清單" icon="ui-icon-trash"
								rendered="#{ListSapPlantAttributeBean.listSapPlantAttribute.size()>0}"
								oncomplete="PF('deleteConfirmSapDialog').show();" />
				      
				        </f:facet>
						<p:column selectionMode="multiple" exportable="false"
							style="text-align:center;width:20px" />
						<p:columns value="#{ListSapPlantAttributeBean.columns}"
							rendered="#{column.property!='ID'}"
							var="column" sortBy="#{listSapPlantAttribute[column.property]}"
							columnIndexVar="colIndex" style="text-align:center;">
							<f:facet name="header">
								<h:outputText value="#{column.header}" />
							</f:facet>
							<h:outputText value="#{listSapPlantAttribute[column.property]}" />
						</p:columns>
					</p:dataTable>
					<p:panelGrid columns="2">
						<p:panel header="Export All Data">
							<h:commandLink>
								<p:graphicImage value="../../resources/images/excel.png" />
								<p:dataExporter type="xls" target="listSapPlantAttribute"
									fileName="SAP_PLANT_ATTRIBUTE" />
							</h:commandLink>
						</p:panel>
						<p:panel header="Upload Data">
							<i18n:outputText value="upload.excel" />：
							<p:commandButton icon="ui-icon-disk"
								update=":fileUploadExcelForm"
								action="#{FileUploadExcelBean.excel(3,1)}"
								oncomplete="PF('ExcelFileUploadDialog').show();">
							<f:setPropertyActionListener target="#{FileUploadExcelBean.object}" 
								value="#{ListSapPlantAttributeBean}" />
							<f:setPropertyActionListener target="#{FileUploadExcelBean.updateView}" 
								value="tabView:listSapPlantAttributeForm" />
							</p:commandButton>
						</p:panel>
					</p:panelGrid>
				</h:form>
			</p:tab>
			<p:tab id="tab2">
				<f:facet name="title">
					<i18n:outputText value="edit.sap.profit.center" />
				</f:facet>
				<div align="center">
				<h:form id="sapProfitCenterListForm" prependId="false">
					<p:panelGrid style="margin-top:1px">
						<f:facet name="header">
							<p:row>
								<p:column>PLANT_CODE</p:column>
								<p:column>PROFIT_CENTER</p:column>
								<p:column></p:column>
							</p:row>
						</f:facet>
						<p:row>
							<p:column>
								<p:selectOneMenu
									value="#{ListSapPlantAttributeBean.selectSapProfitCenter.plantCode}"
									filter="true" filterMatchMode="startsWith" style="width:150px;"
									height="150">
									<f:selectItem itemLabel="請選擇" itemValue="" />
									<f:selectItems
										value="#{ListSapPlantAttributeBean.plantCodeMap}" />
									<p:ajax update="profitCenter"
										listener="#{ListSapPlantAttributeBean.getSapProfitCenter}" process="@form"
										  />
								</p:selectOneMenu>
							</p:column>
							<p:column>
								<p:inputText id="profitCenter"
									value="#{ListSapPlantAttributeBean.selectSapProfitCenter.profitCenter}" />
							</p:column>
							<p:column>
								<p:commandButton value="Update" update="sapProfitCenterList"
									icon="ui-icon-disk"
									actionListener="#{ListSapPlantAttributeBean.updateSapProfitCenter}"
									  />
							</p:column>
						</p:row>
					</p:panelGrid>
					<br />
					<p:dataTable var="sapProfitCenterList" paginatorPosition="bottom"
						id="sapProfitCenterList" paginator="true" rows="10"
						value="#{ListSapPlantAttributeBean.sapProfitCenterList}">
						<p:column style="text-align:center;">
							<f:facet name="header">
							PLANT_CODE
						</f:facet>
							<h:outputText value="#{sapProfitCenterList.plantCode}" />
						</p:column>
						<p:column style="text-align:center;">
							<f:facet name="header">
							PROFIT_CENTER
						</f:facet>
							<h:outputText value="#{sapProfitCenterList.profitCenter}" />
						</p:column>
					</p:dataTable>
				</h:form>
				</div>
			</p:tab>
		</p:tabView>
		<p:dialog id="ExcelFileUploadDialog" header="ExcelFileUpload"
			widgetVar="ExcelFileUploadDialog" modal="true" appendTo="@(body)"
			width="600">
			<ui:include src="../CommonView/fileUploadExcel.xhtml" />
		</p:dialog>
		<p:confirmDialog id="deleteConfirmSapDialog" message="確定刪除清單?" width="300"
			header="確定刪除清單" widgetVar="deleteConfirmSapDialog" appendTo="@(body)">
			<h:form id="deleteConfirmErForm" prependId="false">
				<p:commandButton value="Yes Sure"
					oncomplete="PF('deleteConfirmSapDialog').hide();"
					actionListener="#{ListSapPlantAttributeBean.onDelete}"
					update=":tabView:listSapPlantAttributeForm"
					 
					icon="ui-icon-circle-check" />
				<p:commandButton value="Not Yet"
					onclick="PF('deleteConfirmSapDialog').hide();" type="button"
					icon="ui-icon-close" />
			</h:form>
		</p:confirmDialog>
	</ui:define>
</ui:composition>
