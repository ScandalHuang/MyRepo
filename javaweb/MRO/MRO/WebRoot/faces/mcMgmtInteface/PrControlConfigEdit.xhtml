<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:i18n="http://innolux.com/i18n">

	<h:form id="prControlConfigEditForm" prependId="false">
		<c:set var="bean" value="#{PrControlConfigBean}" />
		<c:set var="form" value="#{bean.form}" />
		<c:set var="prControlConfig" value="#{form.prControlConfig}" />
		<p:panelGrid id="prControlConfigHeader" style="width:100%;">
			<p:row>
				<p:column><i18n:outputText value="location.site" />:</p:column>
				<p:column>
					<p:selectOneMenu value="#{prControlConfig.locationSite}"
						id="locationSite13" filter="true" filterMatchMode="contains"
						required="true" requiredMessage="必須有值。">
						<f:selectItem itemLabel="請選擇" itemValue="" />
						<f:selectItems value="#{form.locationSites}" var="locationSites"
							itemLabel="#{locationSites}" itemValue="#{locationSites}" />
						<p:ajax update="prControlConfigHeader" process="@this"
							listener="#{bean.onSelect}" />
					</p:selectOneMenu>
					<p:message for="locationSite13" />
				</p:column>
				<p:column>
					<i18n:outputText value="class.structure1" />:</p:column>
				<p:column>
					<p:selectOneMenu value="#{prControlConfig.commoditygroup}"
						id="commoditygroup13" filter="true" filterMatchMode="contains"
						required="true" requiredMessage="必須有值。">
						<f:selectItem itemLabel="請選擇" itemValue="" />
						<f:selectItems value="#{form.groupOption}" />
						<p:ajax update="prControlConfigHeader" process="@this"
							listener="#{bean.onSelect}" />
					</p:selectOneMenu>
					<p:message for="commoditygroup13" />
				</p:column>
				<p:column>HIGHLIGHT_FLAG:</p:column>
				<p:column>
					<p:selectOneMenu value="#{prControlConfig.highlightFlag}"
						id="highlightFlag" required="true" requiredMessage="必須有值。">
						<f:selectItem itemLabel="請選擇" itemValue="" />
						<f:selectItem itemLabel="Y" itemValue="Y" />
						<f:selectItem itemLabel="N" itemValue="N" />
						<p:ajax update="prControlConfigHeader" process="@this" />
					</p:selectOneMenu>
					<p:message for="highlightFlag" />
				</p:column>
				<p:column rowspan="2">
					<p:commandButton value="SAVE" update="@form"
						actionListener="#{bean.onSave}" />
					<p:commandButton value="Delete" update="@form"
						rendered="#{prControlConfig.id!=null}"
						actionListener="#{bean.onDelete(prControlConfig)}" />
				</p:column>
			</p:row>
			<p:row>
				<p:column>預設<i18n:outputText value="contorl.category" />:</p:column>
				<p:column>
					<p:selectOneMenu value="#{prControlConfig.controlType}" style="width:300px">
						<f:selectItem itemLabel="請選擇" itemValue="" />
						<f:selectItems value="#{form.controlOption}" />
					</p:selectOneMenu>
				</p:column>
				<p:column>SSOTCK多廠區修改:</p:column>
				<p:column>
					<p:selectOneMenu value="#{prControlConfig.sstockFlag}"
						id="sstockFlag" required="true" requiredMessage="必須有值。">
						<f:selectItem itemLabel="請選擇" itemValue="" />
						<f:selectItem itemLabel="Y" itemValue="Y" />
						<f:selectItem itemLabel="N" itemValue="N" />
						<p:ajax update="prControlConfigHeader" process="@this" />
					</p:selectOneMenu>
					<p:message for="sstockFlag" />
				</p:column>
				<p:column>備貨天數修改:</p:column>
				<p:column>
					<p:column>
						<p:inputText value="#{prControlConfig.stockDays}" id="stockDays"/>
					</p:column>
				</p:column>
			</p:row>
		</p:panelGrid>
		<br />
		<p:dataTable var="list" id="prControlConfigs"
			style="width:98%;text-align:center;" value="#{form.list}">
			 <p:column>
				<p:commandButton icon="ui-icon-search" update="@form"
					action="#{bean.onSelect(list)}"  style="width:20px;height:20px;">
					<p:ajax update="@form" listener="#{bean.onSelect(list)}" />
				</p:commandButton>
			</p:column>
			<p:column headerText="區域">#{list.locationSite}</p:column>
			<p:column>
				<f:facet name="header">
					<i18n:outputText value="class.structure1" />
				</f:facet>
				#{list.commoditygroup}
			</p:column>
			<p:column headerText="HIGHLIGHT_FLAG">#{list.highlightFlag}</p:column>
			<p:column headerText="SSOTCK多廠區修改">#{list.sstockFlag}</p:column>
			<p:column>
				<f:facet name="header">預設<i18n:outputText
						value="contorl.category" />
				</f:facet>
				#{SystemConfigBean.parameterMap[list.controlType]}
			</p:column>
			<p:column headerText="備貨天數">#{list.stockDays}</p:column>
			<p:column headerText="LASTUPDATE">
				<h:outputText value="#{list.lastUpdate}">
					<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss" timeZone="GMT+8" />
				</h:outputText>
			</p:column>
		</p:dataTable>
	</h:form>
</ui:composition>
