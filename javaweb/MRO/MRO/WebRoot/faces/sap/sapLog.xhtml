
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:i18n="http://innolux.com/i18n"
	template="/faces/template/template.xhtml">
	<ui:define name="page-content">

		<p:tabView id="tabView" cache="true">

			<p:tab id="tab1">
				<f:facet name="title">
					<h:outputText value="SAP傳檔查詢" />
				</f:facet>
				<h:form id="form" prependId="false">
					<div align="center">
						<p:panelGrid id="search" style="width:100%;word-break:break-all;">
							<f:facet name="header">
								<p:row>
									<p:column>
										<h:outputText value="料號" />
									</p:column>
									<p:column>
										<h:outputText value="傳檔狀態" />
									</p:column>
									<p:column>
										<h:outputText value="申請種類" />
									</p:column>
									<p:column>
										<h:outputText value="傳檔區間" />
									</p:column>
								</p:row>
							</f:facet>
							<p:row>
								<p:column style="text-align:center">
									<p:inputText value="#{SapAccessQueryBean.sapForm.material}" size="20" />
								</p:column>
								<p:column style="text-align:center">
									<p:selectOneMenu value="#{SapAccessQueryBean.sapForm.status}"
										style="width:90px;text-align:left;">
										<f:selectItem itemValue="" itemLabel="請選擇" />
										<f:selectItem itemValue="Y" itemLabel="傳檔成功" />
										<f:selectItem itemValue="N" itemLabel="傳檔失敗" />
										<f:selectItem itemValue="null" itemLabel="待傳檔" />
									</p:selectOneMenu>
								</p:column>
								<p:column style="text-align:center">
									<p:selectOneMenu value="#{SapAccessQueryBean.sapForm.applyCategory}"
										style="width:90px;text-align:left;">
										<f:selectItem itemValue="" itemLabel="請選擇" />
										<f:selectItem itemValue="0" itemLabel="系統重拋" />
										<f:selectItem itemValue="1" itemLabel="料號新增" />
										<f:selectItem itemValue="2" itemLabel="規格異動" />
										<f:selectItem itemValue="3" itemLabel="BY_SITE申請" />
									</p:selectOneMenu>
								</p:column>
								<p:column style="text-align:center">
									<p:calendar id="beginDate"
										value="#{SapAccessQueryBean.sapForm.beginDate}" size="13"
										showOn="button" readonlyInput="true" />
									<p:commandButton icon="ui-icon-close" update="beginDate"
										style="width:24px;height:24px;">
										<f:setPropertyActionListener
											target="#{SapAccessQueryBean.sapForm.beginDate}" value="" />
									</p:commandButton>
											 ~ 
									<p:calendar id="endDate" value="#{SapAccessQueryBean.sapForm.endDate}"
										size="13" showOn="button" readonlyInput="true" />
									<p:commandButton icon="ui-icon-close" update="endDate"
										style="width:24px;height:24px;">
										<f:setPropertyActionListener
											target="#{SapAccessQueryBean.sapForm.endDate}" value="" />
									</p:commandButton>
								</p:column>
							</p:row>
							<f:facet name="footer">
								<p:row>
									<p:column colspan="7" style="text-align: center">
										<p:commandButton value="Search" 
											
											actionListener="#{SapAccessQueryBean.onSearch}"
											update="listItemSiteTransferLog"
											 style="margin-top:5px" />
									</p:column>
								</p:row>
							</f:facet>
						</p:panelGrid>
					</div>
					<br />
					<p:dataTable var="listItemSiteTransferLog" id="listItemSiteTransferLog"
						value="#{SapAccessQueryBean.sapForm.listItemSiteTransferLog}"
						paginator="true" rows="10" paginatorPosition="bottom"> 
						<p:column style="text-align:center;">
							<f:facet name="header">
								<h:outputText value="SAP記錄" />
							</f:facet>
							<p:commandButton icon="ui-icon-search" style="width:20px;height:20px;"
								actionListener="#{SapAccessQueryBean.getSapLogList(
									listItemSiteTransferLog)}"
								update=":sapAccessLogLisForm"
								oncomplete="PF('sapAccessLogListDialog').show();" />
						</p:column>
						<p:column sortBy="#{listItemSiteTransferLog.itemnum}">
							<f:facet name="header">
								<h:outputText value="料號" />
							</f:facet>
							<h:outputText value="#{listItemSiteTransferLog.itemnum}" />
						</p:column>
						<p:column sortBy="#{listItemSiteTransferLog.materialGroup}">
							<f:facet name="header">
								<h:outputText value="類別" />
							</f:facet>
							<h:outputText value="#{listItemSiteTransferLog.materialGroup}" />
						</p:column>
						<p:column sortBy="#{listItemSiteTransferLog.plantCode}">
							<f:facet name="header">
								<h:outputText value="廠別" />
							</f:facet>
							<h:outputText value="#{listItemSiteTransferLog.plantCode}" />
						</p:column>
						<p:column sortBy="#{listItemSiteTransferLog.storageLocation}">
							<f:facet name="header">
								<h:outputText value="Storage_Location" />
							</f:facet>
							<h:outputText value="#{listItemSiteTransferLog.storageLocation}" />
						</p:column>
						<p:column sortBy="#{listItemSiteTransferLog.applyCategory}">
							<f:facet name="header">
								<h:outputText value="申請種類" />
							</f:facet>
							<h:outputText value="系統重拋"
								rendered="#{listItemSiteTransferLog.applyCategory==0}" />
							<h:outputText value="料號新增"
								rendered="#{listItemSiteTransferLog.applyCategory==1}" />
							<h:outputText value="規格異動"
								rendered="#{listItemSiteTransferLog.applyCategory==2}" />
							<h:outputText value="BY_SITE申請"
								rendered="#{listItemSiteTransferLog.applyCategory==3}" />
						</p:column>
						<p:column sortBy="#{listItemSiteTransferLog.applyKeyId}">
							<f:facet name="header">
								<h:outputText value="申請單號" />
							</f:facet>
							<h:outputText value="#{listItemSiteTransferLog.applyKeyId}" />
						</p:column>
						<p:column sortBy="#{listItemSiteTransferLog.status}">
							<f:facet name="header">
								<h:outputText value="傳檔狀態" />
							</f:facet>
							<h:outputText value="#{listItemSiteTransferLog.status=='Y'?'傳檔成功':''}" />
							<h:outputText value="#{listItemSiteTransferLog.status==null?'待傳檔':''}" />
							<h:outputText value="#{listItemSiteTransferLog.status=='N'?'傳檔失敗':''}" />
						</p:column>
						<p:column sortBy="#{listItemSiteTransferLog.createDate}">
							<f:facet name="header">
								<h:outputText value="建立日期" />
							</f:facet>
							<h:outputText value="#{listItemSiteTransferLog.createDate}">
								<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss"
									timeZone="GMT+8" />
							</h:outputText>
						</p:column>
						<p:column sortBy="#{listItemSiteTransferLog.transferDate}">
							<f:facet name="header">
								<h:outputText value="傳檔日期" />
							</f:facet>
							<h:outputText value="#{listItemSiteTransferLog.transferDate}">
								<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss"
									timeZone="GMT+8" />
							</h:outputText>
						</p:column>
					</p:dataTable>

				</h:form>
			</p:tab>
			<p:tab id="tab2" title="SAP_PN傳檔查詢">
				<ui:include src="sapAccessLogPNList.xhtml" />
			</p:tab>
			<p:tab id="tab3" title="SAP_EQ傳檔查詢">
				<ui:include src="sapAccessLogEqList.xhtml" />
			</p:tab>
			<p:tab id="tab4" title="SAP料號重傳">
				<ui:include src="sapReSend.xhtml" />
			</p:tab>
		</p:tabView>

		<p:dialog id="sapAccessLogListDialog"
			widgetVar="sapAccessLogListDialog" modal="true" appendTo="@(body)"
			width="850" height="500">
			<f:facet name="header">
				SAP料號傳檔記錄
			</f:facet>
			<ui:include src="sapAccessLogList.xhtml" />
		</p:dialog>
		
		<p:dialog id="listItemCommonFormDialog"
		widgetVar="listItemCommonFormDialog" modal="true" appendTo="@(body)"
		width="800" height="500">
		<f:facet name="header">
			<i18n:outputText value="itemnum" />
		</f:facet>
		<ui:include src="../CommonView/listItemCommon.xhtml" />
		</p:dialog>
		
	</ui:define>
</ui:composition>
