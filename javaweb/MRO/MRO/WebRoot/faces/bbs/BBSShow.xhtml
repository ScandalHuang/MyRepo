<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui" xmlns:i18n="http://innolux.com/i18n">



	<h:form id="form" prependId="false">


		<p:tabView value="#{BbsShowBean.bbsForm.typeList}" var="typeList" dynamic="true" cache="true">
			<p:tab title="#{SystemConfigBean.parameterMap[typeList]}">
				<p:dataTable var="bbsList" value="#{BbsShowBean.bbsForm.bbsMapList[typeList]}"
					rowKey="#{bbsList.bulletinboardid}" paginator="true" rows="10"
					paginatorPosition="bottom" selectionMode="single" id="bbsList">
					
					<p:ajax event="rowSelect" listener="#{BbsShowBean.onRowSelect}"
						oncomplete="PF('dialog').show()" update=":dialog" />
						
					<p:column sortBy="#{bbsList.subJect}" >
						<f:facet name="header">
							<h:outputText value="標題" />
						</f:facet>
					    <p:graphicImage value="/resources/images/new.gif" 
					    	style="vertical-align: middle;"
					    	rendered="#{BbsShowBean.bbsForm.bbsTimeMap[bbsList.bulletinboardid]}"/>  
						<h:outputText value="#{bbsList.subject}" 
					    	rendered="#{BbsShowBean.bbsForm.bbsTimeMap[bbsList.bulletinboardid]}"
							style="white-space: pre-wrap; word-wrap: break-word; color:red;font-weight: bold; "/>
						<h:outputText value="#{bbsList.subject}" 
					    	rendered="#{!BbsShowBean.bbsForm.bbsTimeMap[bbsList.bulletinboardid]}"
								style="white-space: pre-wrap; word-wrap: break-word; "/>
						<h:outputText value="　(more..)" style="color:#4d2fff" />

					</p:column>


					<p:column sortBy="#{bbsList.postdate}" style="text-align:center;">
						<f:facet name="header">
							<h:outputText value="張貼日期" />

						</f:facet>
						<h:outputText
									value="#{bbsList.postdate}">
									<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss"
										timeZone="GMT+8" />
						</h:outputText>

					</p:column>
					<p:column style="text-align:center;">
						<f:facet name="header">
							<h:outputText value="張貼人" />

						</f:facet>
						<h:outputText value="#{BbsShowBean.bbsForm.postNameMap[bbsList.postby]}" />
					</p:column>
					
				</p:dataTable>
			</p:tab>
		</p:tabView>
	</h:form>
	<p:dialog id="dialog" header="公告內容" widgetVar="dialog" modal="true"
		resizable="false" appendTo="@(body)" width="800">
		<h:form id="contentForm" prependId="false">
			<h:panelGrid id="display" columns="2" cellpadding="4"
				style="width:100%">
				<h:outputText value="內容" />
				<h:outputText value="#{BbsShowBean.bbsForm.bulletinboard.message}"
					style="white-space: pre-wrap; word-wrap: break-word; " />
				<h:outputText value="附檔" />
				<p:dataList value="#{BbsShowBean.bbsForm.listAttachment}"
					var="listAttachment" id="listAttachment" type="ordered">
					<h:commandLink
						actionListener="#{FileUploadBean.download(listAttachment)}"
						style="margin-right:20px;" 
						>
						<font color="blue">#{listAttachment.fileName} </font>
					</h:commandLink>
				</p:dataList>
			</h:panelGrid>
		</h:form>
	</p:dialog>



</ui:composition>
